window.fundiin = {productDetail: null}; window.fundiin.productDetail = {installmentPlan: {revolving: false, twoPhases: false, threePhases: false, bnplPlus: true}};const generateProductDetailLogo = () => { return ` <svg xmlns="http://www.w3.org/2000/svg" width="80" height="48" viewBox="0 0 48 12"> <defs> <linearGradient id="paint0_linear_1270_3013" x1="0" y1="1.54321" x2="-5.91245e-07" y2="11.1111" gradientUnits="userSpaceOnUse"> <stop offset="0" stop-color="#00E6CB"/> <stop offset="1" stop-color="#744DEF"/> </linearGradient> <linearGradient id="paint1_linear_1270_3013" x1="0" y1="1.54321" x2="-5.91245e-07" y2="11.1111" gradientUnits="userSpaceOnUse"> <stop offset="0" stop-color="#00E6CB"/> <stop offset="1" stop-color="#744DEF"/> </linearGradient> <linearGradient id="paint2_linear_1270_3013" x1="0" y1="1.54321" x2="-5.91245e-07" y2="11.1111" gradientUnits="userSpaceOnUse"> <stop offset="0" stop-color="#00E6CB"/> <stop offset="1" stop-color="#744DEF"/> </linearGradient> <linearGradient id="paint3_linear_1270_3013" x1="0" y1="1.54321" x2="-5.91245e-07" y2="11.1111" gradientUnits="userSpaceOnUse"> <stop offset="0" stop-color="#00E6CB"/> <stop offset="1" stop-color="#744DEF"/> </linearGradient> <linearGradient id="paint4_linear_1270_3013" x1="0" y1="1.54321" x2="-5.91245e-07" y2="11.1111" gradientUnits="userSpaceOnUse"> <stop offset="0" stop-color="#00E6CB"/> <stop offset="1" stop-color="#744DEF"/> </linearGradient> <linearGradient id="paint5_linear_1270_3013" x1="0" y1="1.54321" x2="-5.91245e-07" y2="11.1111" gradientUnits="userSpaceOnUse"> <stop offset="0" stop-color="#00E6CB"/> <stop offset="1" stop-color="#744DEF"/> </linearGradient> <linearGradient id="paint6_linear_1270_3013" x1="0" y1="1.54321" x2="-5.91245e-07" y2="11.1111" gradientUnits="userSpaceOnUse"> <stop offset="0" stop-color="#00E6CB"/> <stop offset="1" stop-color="#744DEF"/> </linearGradient> <linearGradient id="paint7_linear_1270_3013" x1="0" y1="1.54321" x2="-5.91245e-07" y2="11.1111" gradientUnits="userSpaceOnUse"> <stop offset="0" stop-color="#00E6CB"/> <stop offset="1" stop-color="#744DEF"/> </linearGradient> <linearGradient id="paint8_linear_1270_3013" x1="0" y1="1.54321" x2="-5.91245e-07" y2="11.1111" gradientUnits="userSpaceOnUse"> <stop offset="0" stop-color="#00E6CB"/> <stop offset="1" stop-color="#744DEF"/> </linearGradient> <linearGradient id="paint9_linear_1270_3013" x1="0" y1="1.54321" x2="-5.91245e-07" y2="11.1111" gradientUnits="userSpaceOnUse"> <stop offset="0" stop-color="#00E6CB"/> <stop offset="1" stop-color="#744DEF"/> </linearGradient> <linearGradient id="paint10_linear_1270_3013" x1="0" y1="1.54321" x2="-5.91245e-07" y2="11.1111" gradientUnits="userSpaceOnUse"> <stop offset="0" stop-color="#00E6CB"/> <stop offset="1" stop-color="#744DEF"/> </linearGradient> </defs> <path fill-rule="evenodd" clip-rule="evenodd" d="M15.3228 4.53773C15.4564 4.5287 15.5904 4.54836 15.7158 4.59538C15.8412 4.6424 15.9551 4.7157 16.0498 4.81035C16.1445 4.90501 16.2178 5.01882 16.2648 5.14415C16.3119 5.26948 16.3316 5.40341 16.3225 5.53696V9.82618C16.3316 9.95973 16.3119 10.0937 16.2648 10.219C16.2178 10.3443 16.1445 10.4582 16.0498 10.5528C15.9551 10.6475 15.8412 10.7208 15.7158 10.7678C15.5904 10.8148 15.4564 10.8344 15.3228 10.8254C15.1847 10.8312 15.0469 10.8089 14.9177 10.7598C14.7885 10.7107 14.6706 10.6359 14.5712 10.5399L14.4624 10.4312L14.3196 10.5399C13.9243 10.7839 13.4643 10.9024 13.0002 10.8798C12.6337 10.8974 12.2682 10.8291 11.9329 10.6804C11.5975 10.5317 11.3016 10.3067 11.0687 10.0233C10.5967 9.45145 10.3543 8.72461 10.3886 7.98407V5.51657C10.4035 5.26119 10.5155 5.02116 10.7017 4.84562C10.8878 4.67007 11.1341 4.57229 11.3901 4.57229C11.646 4.57229 11.8923 4.67007 12.0784 4.84562C12.2646 5.02116 12.3766 5.26119 12.3915 5.51657V7.94668C12.3915 8.84055 12.7826 9.01728 13.3573 9.01728C13.4948 9.02258 13.632 9.00004 13.7605 8.95098C13.8891 8.90191 14.0064 8.82736 14.1054 8.73179C14.2944 8.51435 14.3961 8.23467 14.391 7.94668V5.51657C14.3711 5.3876 14.381 5.25578 14.42 5.13125C14.459 5.00671 14.5262 4.89279 14.6162 4.79824C14.7062 4.70369 14.8166 4.63104 14.9391 4.58588C15.0617 4.54072 15.1929 4.52424 15.3228 4.53773Z" fill="url(#paint0_linear_1270_3013)"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M21.3313 4.53754C21.6978 4.51993 22.0633 4.58821 22.3987 4.73692C22.734 4.88563 23.0299 5.11066 23.2628 5.39403C23.7348 5.9659 23.9772 6.69273 23.9429 7.43328V9.90077C23.928 10.1561 23.816 10.3962 23.6299 10.5717C23.4437 10.7473 23.1974 10.845 22.9415 10.845C22.6855 10.845 22.4392 10.7473 22.2531 10.5717C22.0669 10.3962 21.9549 10.1561 21.94 9.90077V7.46726C21.94 6.57339 21.5489 6.39667 20.9742 6.39667C20.8367 6.39136 20.6996 6.4139 20.571 6.46296C20.4424 6.51203 20.3251 6.58659 20.2261 6.68215C20.0474 6.9034 19.9576 7.18337 19.9745 7.46726V9.89736C19.9596 10.1527 19.8476 10.3928 19.6614 10.5683C19.4752 10.7439 19.229 10.8416 18.973 10.8416C18.7171 10.8416 18.4708 10.7439 18.2846 10.5683C18.0985 10.3928 17.9865 10.1527 17.9716 9.89736V5.60816C17.9622 5.47275 17.9823 5.33691 18.0305 5.21003C18.0788 5.08315 18.154 4.96825 18.251 4.87325C18.3479 4.77825 18.4644 4.70543 18.5923 4.65979C18.7202 4.61415 18.8565 4.5968 18.9917 4.60892C19.1297 4.60432 19.2672 4.62718 19.3962 4.6762C19.5252 4.72521 19.6432 4.79938 19.7433 4.89441L19.8487 5.00317L19.9915 4.93181C20.3897 4.6717 20.8556 4.53457 21.3313 4.53754Z" fill="url(#paint1_linear_1270_3013)"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M34.7059 4.60932C34.8398 4.59977 34.9742 4.61905 35.1 4.66585C35.2258 4.71264 35.3401 4.78586 35.4352 4.88057C35.5303 4.97528 35.604 5.08926 35.6512 5.21485C35.6985 5.34043 35.7182 5.4747 35.7091 5.60856V9.93177C35.717 10.0681 35.6971 10.2047 35.6503 10.333C35.6036 10.4614 35.5311 10.5788 35.4373 10.6782C35.3436 10.7775 35.2305 10.8567 35.105 10.9108C34.9795 10.9649 34.8443 10.9928 34.7076 10.9928C34.571 10.9928 34.4358 10.9649 34.3103 10.9108C34.1848 10.8567 34.0717 10.7775 33.9779 10.6782C33.8842 10.5788 33.8117 10.4614 33.765 10.333C33.7182 10.2047 33.6982 10.0681 33.7062 9.93177V5.57456C33.6976 5.44264 33.7179 5.31045 33.7656 5.18715C33.8133 5.06386 33.8873 4.95242 33.9824 4.86058C34.0776 4.76873 34.1916 4.69868 34.3165 4.65529C34.4414 4.6119 34.5743 4.59622 34.7059 4.60932Z" fill="url(#paint2_linear_1270_3013)"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M38.4908 4.6093C38.6244 4.60026 38.7584 4.6199 38.8838 4.66692C39.0092 4.71394 39.1231 4.78724 39.2178 4.8819C39.3125 4.97655 39.3858 5.09036 39.4328 5.21569C39.4799 5.34102 39.4996 5.47497 39.4905 5.60853V9.93172C39.4985 10.0681 39.4785 10.2046 39.4317 10.333C39.385 10.4613 39.3125 10.5788 39.2188 10.6781C39.125 10.7774 39.0119 10.8566 38.8864 10.9107C38.7609 10.9648 38.6257 10.9927 38.4891 10.9927C38.3524 10.9927 38.2172 10.9648 38.0917 10.9107C37.9662 10.8566 37.8531 10.7774 37.7594 10.6781C37.6656 10.5788 37.5931 10.4613 37.5464 10.333C37.4997 10.2046 37.4797 10.0681 37.4876 9.93172V5.57453C37.4824 5.44316 37.5051 5.31219 37.5542 5.19022C37.6033 5.06825 37.6776 4.95804 37.7724 4.86686C37.8672 4.77568 37.9802 4.70559 38.104 4.6612C38.2278 4.6168 38.3596 4.59912 38.4908 4.6093Z" fill="url(#paint3_linear_1270_3013)"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M44.6356 4.53754C45.002 4.51993 45.3675 4.58821 45.7029 4.73692C46.0383 4.88563 46.3342 5.11066 46.5671 5.39403C47.0391 5.9659 47.2815 6.69273 47.2472 7.43328V9.90077C47.2323 10.1561 47.1203 10.3962 46.9341 10.5717C46.7479 10.7473 46.5017 10.845 46.2457 10.845C45.9898 10.845 45.7435 10.7473 45.5573 10.5717C45.3712 10.3962 45.2591 10.1561 45.2443 9.90077V7.46726C45.2443 6.57339 44.8498 6.39667 44.2785 6.39667C44.141 6.39136 44.0038 6.4139 43.8752 6.46296C43.7467 6.51203 43.6294 6.58659 43.5304 6.68215C43.3516 6.9034 43.2619 7.18337 43.2788 7.46726V9.89736C43.2639 10.1527 43.1519 10.3928 42.9657 10.5683C42.7795 10.7439 42.5332 10.8416 42.2773 10.8416C42.0213 10.8416 41.7751 10.7439 41.5889 10.5683C41.4027 10.3928 41.2907 10.1527 41.2758 9.89736V5.60816C41.2667 5.4743 41.2865 5.34003 41.3337 5.21445C41.381 5.08887 41.4546 4.97489 41.5497 4.88018C41.6448 4.78547 41.7591 4.71225 41.8849 4.66545C42.0107 4.61866 42.1451 4.59938 42.279 4.60892C42.4165 4.60362 42.5537 4.62616 42.6822 4.67522C42.8108 4.72429 42.9281 4.79885 43.0271 4.89441L43.1359 5.00317L43.2788 4.93181C43.6817 4.66848 44.1541 4.5312 44.6356 4.53754Z" fill="url(#paint4_linear_1270_3013)"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M31.0199 1.71699C30.8862 1.70739 30.7519 1.72665 30.6263 1.77347C30.5006 1.82029 30.3865 1.89357 30.2917 1.98835C30.1969 2.08312 30.1235 2.19716 30.0767 2.32275C30.0299 2.44833 30.0106 2.58254 30.0202 2.71622V4.89481L29.7311 4.75206C29.3637 4.57866 28.9608 4.49369 28.5546 4.50396C28.1596 4.49502 27.7673 4.56975 27.4033 4.72323C27.0393 4.87671 26.712 5.10545 26.4428 5.39443C25.8641 6.02757 25.5564 6.86207 25.5859 7.71916C25.5632 8.56294 25.8706 9.38231 26.4428 10.0031C26.7094 10.2981 27.0353 10.5336 27.3992 10.6941C27.7631 10.8545 28.1568 10.9364 28.5546 10.9344C29.0706 10.9446 29.579 10.8079 30.0202 10.5401L30.163 10.4314L30.2684 10.5741C30.3607 10.6817 30.4764 10.7668 30.6067 10.8227C30.737 10.8787 30.8783 10.9041 31.0199 10.897C31.1519 10.9055 31.2842 10.8853 31.4076 10.8376C31.5309 10.7899 31.6424 10.7159 31.7343 10.6209C31.8262 10.5258 31.8963 10.4119 31.9397 10.287C31.9831 10.1621 31.9988 10.0293 31.9857 9.89776V2.76041C31.9857 2.10785 31.6456 1.71699 31.0199 1.71699ZM29.6597 8.71839C29.5552 8.84335 29.4239 8.94333 29.2756 9.01096C29.1273 9.0786 28.9658 9.11218 28.8028 9.10925C28.6435 9.12118 28.4836 9.09679 28.3352 9.03791C28.1867 8.97903 28.0536 8.88721 27.9459 8.76938C27.7147 8.48078 27.5941 8.11925 27.6058 7.74976C27.5924 7.56443 27.6172 7.37835 27.6787 7.20298C27.7401 7.02761 27.8368 6.86668 27.9629 6.73013C28.0714 6.61243 28.2052 6.52074 28.3542 6.46189C28.5031 6.40304 28.6635 6.37856 28.8232 6.39026C28.9862 6.38733 29.1477 6.42091 29.296 6.48855C29.4443 6.55618 29.5756 6.65616 29.6801 6.78112C29.9237 7.05702 30.0516 7.41607 30.0372 7.78373C30.014 8.12951 29.8818 8.45906 29.6597 8.72519V8.71839Z" fill="url(#paint5_linear_1270_3013)"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M34.7063 1.89349C34.9435 1.89349 35.171 1.98766 35.3387 2.1553C35.5064 2.32293 35.6007 2.5503 35.6007 2.78737C35.6007 3.02444 35.5064 3.2518 35.3387 3.41943C35.171 3.58706 34.9435 3.68122 34.7063 3.68122C34.4691 3.68122 34.2417 3.58706 34.0739 3.41943C33.9062 3.2518 33.812 3.02444 33.812 2.78737C33.812 2.5503 33.9062 2.32293 34.0739 2.1553C34.2417 1.98766 34.4691 1.89349 34.7063 1.89349Z" fill="url(#paint6_linear_1270_3013)"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M38.4908 1.89378C38.728 1.89378 38.9554 1.98795 39.1232 2.15558C39.2909 2.32322 39.3851 2.55059 39.3851 2.78766C39.3851 3.02473 39.2909 3.25209 39.1232 3.41973C38.9554 3.58736 38.728 3.68152 38.4908 3.68152C38.37 3.69503 38.2478 3.68121 38.1332 3.64107C38.0185 3.60092 37.9143 3.53548 37.8284 3.44962C37.7425 3.36376 37.6771 3.25969 37.6369 3.14509C37.5967 3.03049 37.5829 2.90833 37.5964 2.78766C37.5861 2.66767 37.6021 2.54686 37.6433 2.4337C37.6846 2.32055 37.7502 2.21778 37.8354 2.13262C37.9206 2.04745 38.0234 1.98195 38.1366 1.94069C38.2498 1.89943 38.3707 1.88342 38.4908 1.89378Z" fill="url(#paint7_linear_1270_3013)"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M2.96233 8.60962C3.29422 8.60962 3.61251 8.7414 3.84719 8.97596C4.08187 9.21052 4.21373 9.52866 4.21373 9.86037C4.21373 10.1921 4.08187 10.5102 3.84719 10.7448C3.61251 10.9793 3.29422 11.1111 2.96233 11.1111H1.26206C0.930169 11.1111 0.611864 10.9793 0.377181 10.7448C0.142499 10.5102 0.0106439 10.1921 0.0106439 9.86037C0.0106439 9.52866 0.142499 9.21052 0.377181 8.97596C0.611864 8.7414 0.930169 8.60962 1.26206 8.60962H2.96233Z" fill="url(#paint8_linear_1270_3013)"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M6.9644 4.30703C7.28681 4.31188 7.5949 4.44094 7.82443 4.66728C8.05397 4.89361 8.18724 5.19975 8.19645 5.5219C8.20566 5.84404 8.09011 6.1573 7.87387 6.39637C7.65764 6.63544 7.35742 6.78185 7.03582 6.80509H1.25489C0.932484 6.80024 0.624393 6.67121 0.394856 6.44487C0.165318 6.21853 0.0320469 5.91237 0.022838 5.59023C0.0136291 5.26809 0.129183 4.95482 0.345416 4.71575C0.56165 4.47669 0.861868 4.33027 1.18347 4.30703H6.9644Z" fill="url(#paint9_linear_1270_3013)"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M10.3614 0.000509602C10.6933 -0.00895507 11.0154 0.113742 11.2567 0.341608C11.4981 0.569474 11.6391 0.883848 11.6485 1.21556C11.658 1.54728 11.5352 1.86917 11.3072 2.11042C11.0793 2.35167 10.7647 2.49253 10.4328 2.50199H1.25139C0.9206 2.49845 0.604358 2.36554 0.370439 2.13175C0.136519 1.89795 0.0035382 1.58187 0 1.25125C0.00582342 0.933443 0.129943 0.629205 0.348127 0.397939C0.566311 0.166673 0.862886 0.0249725 1.17997 0.000509602H10.3614Z" fill="url(#paint10_linear_1270_3013)"/> </svg> `; }; const generateProductDetailPromotions = (promotions = []) => { const generatePromotionWidgetStyle = () => { return ` <style> .fundiin-promotions-wrapper { color: #9b9b9b; height: 60vh; width: 100%; padding: 20px; display: flex; flex-direction: column; align-items: center; justify-content: flex-start; gap: 24px; .fundiin-promotions__title { text-align: center; font-size: 24px; font-weight: 600; line-height: 24px; margin-bottom: 0; } .fundiin-promotions { height: 100%; width: 100%; overflow-y: auto; .fundiin-promotion { width: 100%; display: flex; flex-direction: column; .fundiin-promotion-detail { display: flex; align-items: center; justify-content: flex-start; gap: 12px; box-shadow: 6px 2px 6px rgba(0, 0, 0, 0.1); .fundiin-promotion-detail__desc { display: flex; flex-direction: column; gap: 4px; span { color: #000; font-size: 16px; line-height: 24px; font-weight: 600; } } } .fundiin-promotion-detail:after { content: ''; width: 10px; height: 100%; background: linear-gradient(-137deg, #fff 6px, transparent 0) 0 5px; background-position: left; } .fundiin-promotion__condition { margin-top: 4px; border-left: 4px solid #f5f5f5; padding-left: 8px; font-size: 12px; } } .fundiin-promotion:not(:last-child) { margin-bottom: 16px; } } } </style> `; }; const generatePromotionList = () => { let result = ''; for (let promotion of promotions) { result += ` <div class="fundiin-promotion"> <div class="fundiin-promotion-detail"> ${!!promotion?.logo ? `<img src=${promotion?.logo} alt=${promotion?.code} />` : `<svg xmlns="http://www.w3.org/2000/svg" width="70" height="70" viewBox="0 0 70 70" fill="none"> <path d="M0 8.75L2.62876 4.375L0 0H70V70H0L2.62876 65.625L0 61.25L2.62876 56.875L0 52.5L2.62876 48.125L0 43.75L2.62876 39.375L0 35L2.62876 30.625L0 26.25L2.62876 21.875L0 17.5L2.62876 13.125L0 8.75Z" fill="url(#paint0_linear_2517_6440)"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M27.621 43.2483C28.4712 43.2483 29.2866 43.604 29.8877 44.2371C30.4889 44.8702 30.8266 45.7288 30.8266 46.6241C30.8266 47.5195 30.4889 48.3781 29.8877 49.0112C29.2866 49.6443 28.4712 50 27.621 50H23.2057C22.3555 50 21.5401 49.6443 20.9389 49.0112C20.3377 48.3781 20 47.5195 20 46.6241C20 45.7288 20.3377 44.8702 20.9389 44.2371C21.5401 43.604 22.3555 43.2483 23.2057 43.2483H27.621Z" fill="white"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M23.2057 31.5915H37.8428C38.693 31.5915 39.5084 31.9472 40.1095 32.5803C40.7107 33.2134 41.0484 34.072 41.0484 34.9673C41.0356 35.826 40.7181 36.6486 40.1585 37.2733C39.5989 37.898 38.8375 38.2796 38.0242 38.3432H23.2057C22.3555 38.3432 21.5401 37.9875 20.9389 37.3544C20.3377 36.7213 20 35.8627 20 34.9673C20 34.072 20.3377 33.2134 20.9389 32.5803C21.5401 31.9472 22.3555 31.5915 23.2057 31.5915Z" fill="white"/> <path fill-rule="evenodd" clip-rule="evenodd" d="M46.734 20C47.6002 20 48.4309 20.3624 49.0435 21.0074C49.656 21.6524 50.0001 22.5273 50.0001 23.4395C50.0001 24.3517 49.656 25.2266 49.0435 25.8716C48.4309 26.5166 47.6002 26.879 46.734 26.879H23.2057C22.3603 26.8627 21.5539 26.5018 20.9561 25.8722C20.3582 25.2426 20.0155 24.3934 20 23.5032C20.0262 22.6488 20.3481 21.8341 20.9051 21.2123C21.4621 20.5905 22.2158 20.2047 23.0242 20.1274L46.734 20Z" fill="white"/> <defs> <linearGradient id="paint0_linear_2517_6440" x1="-1.30233e-06" y1="41.0744" x2="70" y2="42.5207" gradientUnits="userSpaceOnUse"> <stop stop-color="#00E6CB"/> <stop offset="1" stop-color="#744DEF"/> </linearGradient> </defs> </svg>`} <div class="fundiin-promotion-detail__desc"> <span>${promotion?.code}</span> <p>${promotion?.name}</p> </div> </div> <div class="fundiin-promotion__condition"> ${promotion?.shortDescription} </div> </div> `; } return result; }; return ` ${generatePromotionWidgetStyle()} <div class="fundiin-promotions-wrapper"> <h3 class="fundiin-promotions__title">Mã giảm giá khi thanh toán qua Fundiin</h3> <div class="fundiin-promotions"> ${generatePromotionList()} </div> </div> `; }; const onPromotionModalOpened = (modal, promotions = []) => { const promotionTrigger = document.getElementById('fundiin-promotions-widget'); if (!promotionTrigger) { return; } promotionTrigger.addEventListener('click', event => { event.preventDefault(); document.querySelector('.fundiin-modal-content').innerHTML = generateProductDetailPromotions(promotions); modal.style.display = 'block'; document.body.style.overflow = 'hidden'; }); }; const detailTrackingScript = () => {
  window.dataLayer = window.dataLayer || [];

  const fundiinContentV2 = document.querySelector('#script-general-container > .fundiin-wrapper');
  const fundiinContentV1 = document.querySelector('#script-product-detail > .fundiin-wrapper');

  if (!fundiinContentV2 && !fundiinContentV1) {
    return;
  }

  window.dataLayer.push({
    event: 'view_product_detail',
    event_category: 'mx_site',
    event_action: 'view',
    event_label: 'mx_detail_logo',
  });

  document.querySelector('#fundiin-introduction').addEventListener('click', () => {
    window.dataLayer.push({
      event: 'click_detail_info',
      event_category: 'mx_site',
      event_action: 'click',
      event_label: 'click_detail_info',
    });
  });

  if (document.querySelector('#fundiin-promotions-widget')) {
    document.querySelector('#fundiin-promotions-widget').addEventListener('click', () => {
      window.dataLayer.push({
        event: 'click_see_more',
        event_category: 'mx_site',
        event_action: 'click',
        event_label: 'mx_see_more',
      });
    });
  }

  document.querySelectorAll('button').forEach(button => {
    if (button.innerText.toLowerCase().includes('mua ngay')) {
      button.addEventListener('click', () => {
        window.dataLayer.push({
          event: 'buy_now',
          event_category: 'mx_site',
          event_action: 'click',
          event_label: 'buy_now',
        });
      });
    }

    if (button.innerText.toLowerCase().includes('thêm vào giỏ')) {
      button.addEventListener('click', () => {
        window.dataLayer.push({
          event: 'add_cart',
          event_category: 'mx_site',
          event_action: 'click',
          event_label: 'detail_cart_add',
        });
      });
    }
  });
};
 (function () { const trackingScript = document.createElement('script'); trackingScript.type = 'text/javascript'; trackingScript.innerHTML = ` (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= 'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-TP47LP6K'); `; document.head.appendChild(trackingScript); })(); const generateProductDetailStyle = () => { return ` .fundiin-wrapper { display: flex; flex-direction: column; justify-content: center; align-items: flex-start; gap: 0.2rem; font-size: 14px; font-weight: 400; line-height: 24px; p { margin-top: 0; margin-bottom: 0; } .fundiin-title { display: flex; align-items: center; gap: 0.5rem; color: #9b9b9b; svg { cursor: pointer; } } .fundiin-banner { max-width: 370px; padding: 10px 8px; border-radius: 5px; background: linear-gradient(to right, #06decd, #744def); font-weight: 500; color: #fff; display: flex; align-items: center; gap: 8px; .fundiin-banner__text { i { text-decoration: underline; cursor: pointer; } } } } .fundiin-overlay { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: hidden; background-color: rgba(0,0,0,0.4); .fundiin-modal { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 90%; height: auto; border-radius: 16px; background-color: #fefefe; .fundiin-modal__close { position: absolute; top: 4px; right: 12px; color: #aaa; font-size: 20px; font-weight: bold; } .fundiin-modal__close:hover, .fundiin-modal__close:focus { color: #000; cursor: pointer; } } @media (min-width: 768px) { .fundiin-modal { width: 70%; } } @media (min-width: 1024px) { .fundiin-modal { width: 600px; } } } `; }; const onIntroductionModalOpened = (modal) => { const introductionTrigger = document.getElementById('fundiin-introduction'); if (!introductionTrigger) { return; } introductionTrigger.addEventListener('click', event => { event.preventDefault(); document.querySelector('.fundiin-modal-content').innerHTML = ` <img src="https://assets.fundiin.vn/merchant/UI_POP-UP_DESKTOP_VER1.png" alt="Fundiin Introduction" /> `; modal.style.display = 'block'; document.body.style.overflow = 'hidden'; }); }; const generateActionHandler = (promotions) => { /* Start attaching events to template */ const modal = document.getElementById('fundiin-modal'); const modalClose = document.querySelector('.fundiin-modal__close'); const modalContent = document.querySelector('.fundiin-modal-content'); if (!modal || !modalClose || !modalContent) { return; } const onModalClosed = event => { event.preventDefault(); modal.style.display = 'none'; document.body.style.overflowY = 'auto'; modalContent.innerHTML = ''; }; /* Start closing modal */ modalClose.addEventListener('click', onModalClosed); window.onclick = event => { if (event.target === modal) { onModalClosed(event); } }; /* End closing modal */ /* Start information modal */ onIntroductionModalOpened(modal); /* End information modal */ /* Start promotions widget */ if (promotions && promotions.length > 0 && typeof generateProductDetailPromotions === 'function' && typeof onPromotionModalOpened === 'function') { onPromotionModalOpened(modal, promotions); } /* End promotions widget */ /* End attaching events to template */ }; (function () { if (!window.fundiin && !window.fundiin?.productDetail) { return; } const stylesheet = document.createElement('style'); stylesheet.innerHTML = generateProductDetailStyle(); document.head.appendChild(stylesheet); const mainFunction = () => { const containerV2 = document.getElementById('script-general-container'); const containerV1 = document.getElementById('script-product-detail'); if (!containerV2 && !containerV1) { return; } const container = !!containerV2 ? containerV2 : containerV1; let totalPrice = 0; if (typeof fundiinDetailConfig !== 'undefined' && !!fundiinDetailConfig?.data && !!fundiinDetailConfig?.data?.amount) { totalPrice = fundiinDetailConfig?.data?.amount; } if (typeof price !== 'undefined') { totalPrice = price; } const { productDetail } = window.fundiin; const { bannerDescription = '', installmentPlan = undefined, promotions = [], } = productDetail; /* Start creating content of template */ const generateDescription = price => { const comparedPrice = 200000; const convertCurrency = result => Math.floor(result).toLocaleString('vi-VN', { style: 'currency', currency: 'VND' }); if (price <= comparedPrice && installmentPlan?.revolving) { return `Mua trả sau ${convertCurrency(0)} với`; } if (installmentPlan?.twoPhases) { return `Trả sau ${convertCurrency(price / 2)} x2 kỳ với`; } if (installmentPlan?.threePhases) { return `Trả sau ${convertCurrency(price / 3)} x3 kỳ với`; } if (installmentPlan?.bnplPlus) { return 'Trả sau đến 12 tháng với'; } return 'Thanh toán ngay với'; }; container.innerHTML = ` <section class="fundiin-wrapper"> <div class="fundiin-title"> <p class="fundiin-title__text">${generateDescription(totalPrice)}</p> ${typeof generateProductDetailLogo === 'function' ? generateProductDetailLogo() : '<p style="color: #24c3fd">Fundiin</p>'} <svg xmlns="http://www.w3.org/2000/svg" viewBox="-2 2 25 17" height="20" width="20" id="fundiin-introduction"> <defs> <style> .cls-1 { fill:#212121; } .cls-2 { fill:#fff; } </style> </defs> <g id="Layer_2" data-name="Layer 2"> <g id="Layer_1-2" data-name="Layer 1"> <circle class="cls-1" cx="11.27" cy="11.27" r="11.27"></circle> <path class="cls-2" d="M11.64,4.27a4.91,4.91,0,0,1,1.62.26,3.45,3.45,0,0,1,1.26.74,3.51,3.51,0,0,1,.82,1.2,4.4,4.4,0,0,1,.29,1.64,4.41,4.41,0,0,1-.32,1.75,3.24,3.24,0,0,1-.89,1.22,3.65,3.65,0,0,1-1.38.73,6.21,6.21,0,0,1-1.78.27v2.07H9.31v-3.5h.87a8.85,8.85,0,0,0,1.28-.1,2.83,2.83,0,0,0,1.08-.38,2,2,0,0,0,.74-.77,2.53,2.53,0,0,0,.28-1.28A2.12,2.12,0,0,0,13,6.57,2,2,0,0,0,11.55,6,2.14,2.14,0,0,0,10,6.61a2.07,2.07,0,0,0-.59,1.53h-2a4,4,0,0,1,.27-1.57,3.44,3.44,0,0,1,.83-1.22,4,4,0,0,1,1.34-.79A5.21,5.21,0,0,1,11.64,4.27Zm-.16,11.56v2.38H9.13V15.83Z"></path> </g> </g> </svg> </div> <div class="fundiin-banner"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 66.71 66.71" width="55" height="55"> <defs> <style> .promo-cls-1 { fill:#fff; } </style> </defs> <g id="Layer_2" data-name="Layer 2"> <g id="Layer_1-2" data-name="Layer 1"> <path class="promo-cls-1" d="M41.46,40.39a3.4,3.4,0,0,0-2.76,1.26,4.86,4.86,0,0,0-1,3.25,5,5,0,0,0,1,3.31,3.4,3.4,0,0,0,2.76,1.26,3.48,3.48,0,0,0,2.79-1.26,4.86,4.86,0,0,0,1.07-3.31,4.77,4.77,0,0,0-1.07-3.25A3.48,3.48,0,0,0,41.46,40.39Z"></path> <path class="promo-cls-1" d="M23.89,26.77a3.51,3.51,0,0,0,2.79-1.23,4.81,4.81,0,0,0,1.07-3.28A4.91,4.91,0,0,0,26.68,19a3.47,3.47,0,0,0-2.79-1.25A3.42,3.42,0,0,0,21.12,19a5,5,0,0,0-1,3.31,4.9,4.9,0,0,0,1,3.28A3.46,3.46,0,0,0,23.89,26.77Z"></path> <path class="promo-cls-1" d="M65.23,29.78,58.42,23V13.35a5.05,5.05,0,0,0-5.05-5.06H43.74L36.93,1.48a5.06,5.06,0,0,0-7.15,0L23,8.29H13.35a5.05,5.05,0,0,0-5.06,5.06V23L1.48,29.78a5.06,5.06,0,0,0,0,7.15l6.81,6.81v9.63a5.06,5.06,0,0,0,5.06,5.06H23l6.81,6.8a5,5,0,0,0,7.15,0l6.81-6.8h9.63a5.06,5.06,0,0,0,5.05-5.06V43.74l6.81-6.81A5,5,0,0,0,65.23,29.78Zm-48.62-4a9.62,9.62,0,0,1-.6-3.5,9.83,9.83,0,0,1,.6-3.53,7.15,7.15,0,0,1,4.18-4.27,8.61,8.61,0,0,1,3.15-.57,7.72,7.72,0,0,1,5.66,2.2,8.31,8.31,0,0,1,2.21,6.17,8.23,8.23,0,0,1-2.21,6.11,7.72,7.72,0,0,1-5.66,2.2A8.41,8.41,0,0,1,20.79,30a7.21,7.21,0,0,1-4.18-4.24Zm8.58,27H19.35l20.86-38.4H46Zm22-1.71a7.82,7.82,0,0,1-5.69,2.2,8.14,8.14,0,0,1-3.1-.58,7.39,7.39,0,0,1-2.5-1.62,7.27,7.27,0,0,1-1.67-2.64,9.83,9.83,0,0,1-.6-3.53,9.62,9.62,0,0,1,.6-3.5,7.18,7.18,0,0,1,4.17-4.23,8.14,8.14,0,0,1,3.1-.58,7.82,7.82,0,0,1,5.69,2.2,8.2,8.2,0,0,1,2.24,6.11A8.27,8.27,0,0,1,47.15,51.07Z"></path> </g> </g> </svg> <div class="fundiin-banner__text"> <span>${!!bannerDescription ? bannerDescription : 'Trả sau thoải mái, ít thủ tục, xét duyệt nhanh!'}</span> ${!!promotions && promotions.length > 0 && typeof generateProductDetailPromotions === 'function' && typeof onPromotionModalOpened === 'function' ? `<i id="fundiin-promotions-widget">Xem thêm</i>` : ''} </div> </div> <div id="fundiin-modal" class="fundiin-overlay"> <div class="fundiin-modal"> <span class="fundiin-modal__close">×</span> <div class="fundiin-modal-content"></div> </div> </div> </section> `; /* End creating content of template */ generateActionHandler(promotions); if (typeof detailTrackingScript === 'function') { detailTrackingScript(); } }; window.addEventListener('load', mainFunction); window.addEventListener('beforeunload', () => { window.removeEventListener('load', mainFunction); }); })();