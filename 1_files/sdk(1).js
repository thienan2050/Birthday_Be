var Tawk_API=Tawk_API||{},Tawk_LoadStart=new Date,EzCa_API=EzCa_API||function(){function kt(n,t,i,r){var u=new XMLHttpRequest;u.open(t,n);t==="POST"&&u.setRequestHeader("Content-Type","application/json;charset=UTF-8");i?u.send(JSON.stringify(i)):u.send();u.responseType="json";u.onload=function(){typeof r=="function"&&r(this.response)};u.onerror=function(){}}function li(n,t){kt(n,"GET",null,t)}function ai(n,t){return n=Math.ceil(n),t=Math.floor(t),Math.floor(Math.random()*(t-n)+n)}function dt(){return Math.floor(Date.now()/1e3)}function ut(){var n=dt();return`${n}${ai(1e5,999999)}`}function k(){var r=document.getElementById("ezcaScript"),t,i;if(r)n.scriptSrc=r.src;else{t=document.getElementsByTagName("script");for(i in t)t[i].src&&t[i].src.includes("cdn.ezca.asia/js/sdk.js")&&(n.scriptSrc=t[i].src)}return f("id",n.scriptSrc)}function e(){var t=l(n.ezcaKey);return t&&t.length==16?n.newVisitor||(n.newVisitor=0):(t=ut(),n.firstView=1,n.newVisitor=1),r.setItem(n.newVisitorKey,n.newVisitor),g(n.ezcaKey,t,730),t}function ft(){var t=r.getItem(n.sidKey);return t||(t=h(8),r.setItem(n.sidKey,t)),t}function vi(n){var t=["_t="+(new Date).getTime()];for(var i in n)t.push(encodeURIComponent(i)+"="+encodeURIComponent(n[i]));return t.join("&")}function f(n,t){try{var t=new b(t?t:document.location.toString()),i=new URLSearchParams(t.search).get(n);return i?i:""}catch(r){return console.log("Error GetParam",r),""}}function gt(t,i){var u=0;i?(u=r.getItem(t),u||(u=0)):r.setItem(t,u);setInterval(function(){l(n.actKey)?u++:u=0;r.setItem(t,u);a(t==n.tipKey?"timeOnPage":"timeOnSession",u)},1e3)}function yi(n){var t=r.getItem(n);t||(t=0);t++;r.setItem(n,t);a("pageview",t)}function et(t){if(!isNaN(t)){n.pId=t;var i=ni();i.includes(t)||i.splice(0,0,parseInt(t));bt.setItem(n.recentIdsKey,JSON.stringify(i))}}function ni(){var t=bt.getItem(n.recentIdsKey);return t=t?JSON.parse(t):[],t.slice(0,5)}function pi(){var u,e,o,t,i;if(!n.preview&&(n.productViewLog=null,n.isECommerce))if(n.isWooCommerce){if(u=document.querySelector("link[rel=shortlink]"),!u){r.setItem(n.pvidKey,document.location.pathname);return}if(t=f("p",u.href),!t){r.setItem(n.pvidKey,document.location.pathname);return}if(n.currentPId=t,i=r.getItem(n.pvidKey),i==t)return;e=document.querySelector("form.variations_form.cart");e&&(n.productViewLog={webId:n.wid,prevId:i,nextId:t},et(t));r.setItem(n.pvidKey,t)}else if(n.isHaravan){if(y()!=="product"){o=window.meta?window.meta.page.resourceId:document.location.pathname;r.setItem(n.pvidKey,o);return}function i(t){n.currentPId=t;var i=r.getItem(n.pvidKey);i!=t&&(n.productViewLog={webId:n.wid,prevId:i,nextId:t},et(t),r.setItem(n.pvidKey,t))}t=window.meta?window.meta.product.id:"";t?i(t):Haravan.getProduct(document.location.pathname.replace("/products/",""),function(n){console.log("Init meta2 success");window.meta={page:{pageType:"product",resourceType:"product",resourceId:n.id},product:n};t=n.id;i(t)})}else if(n.isSapo){if(Bizweb.template!="product"){r.setItem(n.pvidKey,document.location.pathname);return}if(t=window.meta.product.id,n.currentPId=t,i=r.getItem(n.pvidKey),i==t)return;Bizweb.template.includes("product")&&(n.productViewLog={webId:n.wid,prevId:i,nextId:t},et(t));r.setItem(n.pvidKey,t)}}function ot(){var u=JSON.parse(r.getItem("__ezca_utm")),i=document.referrer?new b(document.referrer).hostname:"",t;return new b(document.location.toString()).hostname==i&&(i=""),t={dl:encodeURIComponent(document.location.toString()),dt:encodeURIComponent(document.title),dp:encodeURIComponent(document.location.pathname),dh:encodeURIComponent(document.location.hostname),w:window.screen.width,h:window.screen.height,fi:n.newVisitor,sid:ft(),uid:e(),wid:n.wid,tip:r.getItem(n.tipKey),tis:r.getItem(n.tisKey),pis:r.getItem(n.pisKey),dr:i,cn:f("utm_campaign"),cs:f("utm_source"),cc:f("utm_content"),ck:f("utm_term"),cm:f("utm_medium"),gclid:f("gclid")},t.tip=t.tip?t.tip:0,t.tis=t.tis?t.tis:0,t.pis=t.pis?t.pis:0,t}function g(n,t,i){var r=new Date,u;r.setTime(r.getTime()+i*864e5);u="expires="+r.toUTCString();document.cookie=n+"="+t+";"+u+";path=/"}function l(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)==" ";)t=t.substring(1);if(t.indexOf(r)==0)return t.substring(r.length,t.length)}return""}function ht(n){n=n.replace(/-/g,"+").replace(/_/g,"/");var t=decodeURIComponent(atob(n).split("").map(function(n){return"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(t)}function wi(n){var t=btoa(JSON.stringify(n));return t=t.replace(/=+$/,""),t=t.replace(/\+/g,"-"),t.replace(/\//g,"_")}function t(n,t){return n+":"+t+"!important;"}function ti(n,t){var i=document.createElement("style");i.id="ezca-"+(t?t:h(8));i.innerHTML=n;document.head.appendChild(i)}function ki(n){var t=n.identity.replace("tawk.to/chat","embed.tawk.to");Tawk_API.onChatMaximized=function(){console.log("onChatMaximized");s("EzCa TawkTo","TawkTo Click")};Tawk_API.onChatStarted=function(){console.log("onChatStarted");s("EzCa TawkTo","TawkTo ChatStarted")};Tawk_API.onChatEnded=function(){console.log("onChatEnded");s("EzCa TawkTo","TawkTo ChatEnded")};Tawk_API.onPrechatSubmit=function(n){console.log("onPrechatSubmit",n);s("EzCa TawkTo","TawkTo PrechatSubmit")};Tawk_API.onOfflineSubmit=function(n){console.log("onOfflineSubmit",n);s("EzCa TawkTo","TawkTo OfflineSubmit")};ct(document,"script","ezca-tawkto-sdk",t);console.log("initTawkTo success")}function di(i){var r=document.getElementById("ezca-btn-fb"),f,u;r||(r=document.createElement("div"),r.id="ezca-btn-fb",f=t("width","60px")+t("height","60px")+t("border-radius","50%")+t("padding","6px")+t("cursor","pointer")+t("position","fixed")+t("bottom",n.mobile?"20px":"24px")+t("right",n.mobile?"20px":"24px")+t("z-index",rt)+t("background","#0A7CFF")+t("box-shadow","rgb(0 0 0 / 15%) 0px 4px 12px 0px")+"",r.style=f,document.body.appendChild(r),u=document.createElement("style"),u.id="ezca-"+h(8),u.innerHTML="#ezca-btn-fb svg path:nth-child(1){fill:#fff!important} #ezca-btn-fb svg path:nth-child(2){fill:#0A7CFF!important}",document.head.appendChild(u),r.innerHTML+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M24,4C13.5,4,5,12.1,5,22c0,5.2,2.3,9.8,6,13.1V44l7.8-4.7c1.6,0.4,3.4,0.7,5.2,0.7c10.5,0,19-8.1,19-18C43,12.1,34.5,4,24,4z"><\/path><path d="M12 28L22 17 27 22 36 17 26 28 21 23z"><\/path><\/svg>',c(r,"click",()=>{var n="https://m.me/"+i.identity.replace("https://m.me/","")+"?ref="+e();window.open(n);s("EzCa Facebook","Facebook Click")}));return}function gi(i,r){var u=document.getElementById("ezca-btn-zalo"),o,f;u||(u=document.createElement("div"),u.id="ezca-btn-zalo",o=t("width","60px")+t("height","60px")+t("border-radius","50%")+t("padding","8px")+t("cursor","pointer")+t("position","fixed")+t("bottom",n.mobile?"20px":"24px")+t(r?"left":"right",n.mobile?"20px":"24px")+t("z-index",rt)+t("background","#0573ff")+t("box-shadow","rgb(0 0 0 / 15%) 0px 4px 12px 0px")+"",u.style=o,document.body.appendChild(u),f=document.createElement("style"),f.id="ezca-"+h(8),f.innerHTML="#ezca-btn-zalo svg path{fill:#fff!important}",document.head.appendChild(f),u.innerHTML+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50"><path d="M 9 4 C 6.2504839 4 4 6.2504839 4 9 L 4 41 C 4 43.749516 6.2504839 46 9 46 L 41 46 C 43.749516 46 46 43.749516 46 41 L 46 9 C 46 6.2504839 43.749516 4 41 4 L 9 4 z M 9 6 L 15.580078 6 C 12.00899 9.7156859 10 14.518083 10 19.5 C 10 24.66 12.110156 29.599844 15.910156 33.339844 C 16.030156 33.549844 16.129922 34.579531 15.669922 35.769531 C 15.379922 36.519531 14.799687 37.499141 13.679688 37.869141 C 13.249688 38.009141 12.97 38.430859 13 38.880859 C 13.03 39.330859 13.360781 39.710781 13.800781 39.800781 C 16.670781 40.370781 18.529297 39.510078 20.029297 38.830078 C 21.379297 38.210078 22.270625 37.789609 23.640625 38.349609 C 26.440625 39.439609 29.42 40 32.5 40 C 36.593685 40 40.531459 39.000731 44 37.113281 L 44 41 C 44 42.668484 42.668484 44 41 44 L 9 44 C 7.3315161 44 6 42.668484 6 41 L 6 9 C 6 7.3315161 7.3315161 6 9 6 z M 33 15 C 33.55 15 34 15.45 34 16 L 34 25 C 34 25.55 33.55 26 33 26 C 32.45 26 32 25.55 32 25 L 32 16 C 32 15.45 32.45 15 33 15 z M 18 16 L 23 16 C 23.36 16 23.700859 16.199531 23.880859 16.519531 C 24.050859 16.829531 24.039609 17.219297 23.849609 17.529297 L 19.800781 24 L 23 24 C 23.55 24 24 24.45 24 25 C 24 25.55 23.55 26 23 26 L 18 26 C 17.64 26 17.299141 25.800469 17.119141 25.480469 C 16.949141 25.170469 16.960391 24.780703 17.150391 24.470703 L 21.199219 18 L 18 18 C 17.45 18 17 17.55 17 17 C 17 16.45 17.45 16 18 16 z M 27.5 19 C 28.11 19 28.679453 19.169219 29.189453 19.449219 C 29.369453 19.189219 29.65 19 30 19 C 30.55 19 31 19.45 31 20 L 31 25 C 31 25.55 30.55 26 30 26 C 29.65 26 29.369453 25.810781 29.189453 25.550781 C 28.679453 25.830781 28.11 26 27.5 26 C 25.57 26 24 24.43 24 22.5 C 24 20.57 25.57 19 27.5 19 z M 38.5 19 C 40.43 19 42 20.57 42 22.5 C 42 24.43 40.43 26 38.5 26 C 36.57 26 35 24.43 35 22.5 C 35 20.57 36.57 19 38.5 19 z M 27.5 21 C 27.39625 21 27.29502 21.011309 27.197266 21.03125 C 27.001758 21.071133 26.819727 21.148164 26.660156 21.255859 C 26.500586 21.363555 26.363555 21.500586 26.255859 21.660156 C 26.148164 21.819727 26.071133 22.001758 26.03125 22.197266 C 26.011309 22.29502 26 22.39625 26 22.5 C 26 22.60375 26.011309 22.70498 26.03125 22.802734 C 26.051191 22.900488 26.079297 22.994219 26.117188 23.083984 C 26.155078 23.17375 26.202012 23.260059 26.255859 23.339844 C 26.309707 23.419629 26.371641 23.492734 26.439453 23.560547 C 26.507266 23.628359 26.580371 23.690293 26.660156 23.744141 C 26.819727 23.851836 27.001758 23.928867 27.197266 23.96875 C 27.29502 23.988691 27.39625 24 27.5 24 C 27.60375 24 27.70498 23.988691 27.802734 23.96875 C 28.487012 23.82916 29 23.22625 29 22.5 C 29 21.67 28.33 21 27.5 21 z M 38.5 21 C 38.39625 21 38.29502 21.011309 38.197266 21.03125 C 38.099512 21.051191 38.005781 21.079297 37.916016 21.117188 C 37.82625 21.155078 37.739941 21.202012 37.660156 21.255859 C 37.580371 21.309707 37.507266 21.371641 37.439453 21.439453 C 37.303828 21.575078 37.192969 21.736484 37.117188 21.916016 C 37.079297 22.005781 37.051191 22.099512 37.03125 22.197266 C 37.011309 22.29502 37 22.39625 37 22.5 C 37 22.60375 37.011309 22.70498 37.03125 22.802734 C 37.051191 22.900488 37.079297 22.994219 37.117188 23.083984 C 37.155078 23.17375 37.202012 23.260059 37.255859 23.339844 C 37.309707 23.419629 37.371641 23.492734 37.439453 23.560547 C 37.507266 23.628359 37.580371 23.690293 37.660156 23.744141 C 37.739941 23.797988 37.82625 23.844922 37.916016 23.882812 C 38.005781 23.920703 38.099512 23.948809 38.197266 23.96875 C 38.29502 23.988691 38.39625 24 38.5 24 C 38.60375 24 38.70498 23.988691 38.802734 23.96875 C 39.487012 23.82916 40 23.22625 40 22.5 C 40 21.67 39.33 21 38.5 21 z"><\/path><\/svg>',c(u,"click",()=>{var n="https://zalo.me/"+i.identity.replace("https://zalo.me/","")+"?ref="+e();window.open(n);s("EzCa Zalo","Zalo Click")}),setTimeout(()=>{var t=document.getElementsByClassName("fb_dialog");t.length>0&&t[0].getAttribute("alignment")=="right"&&(yt(u.id),setTimeout(()=>{u.style.right="",u.style.left=n.mobile?"20px":"24px",nt(u.id)},600))},6e3));return}function ct(n,t,i,r){var u,f=n.getElementsByTagName(t)[0];n.getElementById(i)||(u=n.createElement(t),u.id=i,u.src=r,i==="ezca-tawkto-sdk"&&(u.async=!0,u.charset="UTF-8",u.setAttribute("crossorigin","*")),f.parentNode.insertBefore(u,f))}function ii(n,t){return Array.prototype.slice.call(document.getElementsByTagName(t)).filter(t=>t.textContent.trim()===n.trim())}function nr(n){try{return document.evaluate(n,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}catch(t){return null}}function ri(n,t){n.parentNode.insertBefore(t,n.nextSibling)}function tr(n,t){n.parentNode.insertBefore(t,n)}function c(n,t,i){n.addEventListener?n.addEventListener(t,i,!1):n.attachEvent&&n.attachEvent("on"+t,i)}function ir(){var n=document.documentElement,t=document.body,i="scrollTop",r="scrollHeight";return(n[i]||t[i])/((n[r]||t[r])-n.clientHeight)*100}function y(){var t="";return n.isHaravan?t=window.meta?window.meta.page.pageType:window.template:n.isCafe24&&(t=document.location.pathname.includes("/product/")?"product":""),t}function lt(t){if(!n.data.website.features)return 1;var i=n.data.website.features.find(n=>n.name==t);return i?i.planId:1}function rr(){n.data.integrationss&&n.data.integrationss.forEach(t=>{switch(t.type){case 2:di(t);break;case 3:ki(t);break;case 4:gi(t,n.data.integrationss.findIndex(n=>n.type==2)!=-1)}})}function ui(){var f,s,h,i,c,l;if(n.data.recommender&&n.data.recommender.active){var u=n.data.recommender,e=u.xPath.split("|"),r="",o=!1;for(f=0;f<e.length;f++)if(r=nr(e[f]),r){o=!0;break}if(!o){at<10&&(at++,setTimeout(function(){ui()},1e3));return}(s=["index","home","product","article"],h=y(),s.includes(h))&&(i=document.createElement("iframe"),i.id=n.recommId,c={id:u.id,webId:n.wid,dh:document.location.hostname,currentId:n.currentPId?n.currentPId+"":document.location.pathname,recent:ni(),productId:n.pId?n.pId:0,planId:lt("ProductRecommend")},i.src=n.engageUrl+"/recommender/"+encodeURIComponent(JSON.stringify(c)),l=t("width","100%")+t("border","0"),i.style=l,u.insert==="after"?ri(r,i):u.insert==="before"?tr(r,i):r.appendChild(i),n.iframeIds.push(i.id))}}function ur(i){var c,e,u,l,o,s,r,f,h,a;if(!i){c=document.getElementById("ezca-product-reviews");c&&c.remove();return}e=n.data.productReviewConfig;u="";switch(e.starBadgeAlign){case 0:u="center";break;case 1:u="left";break;case 2:u="right"}if(u){if(l=`.ezca-reviews-badge{display:flex!important;justify-content:${u}!important;margin:4px 0!important;}`+`.ezca-reviews-badge div{width:14px!important;height:14px!important;background-color:${e.starColor?e.starColor:"#ffb400"}!important;}`+".ezca-reviews-badge span{line-height:14px!important;margin-left:4px!important;}.ezca-star{-webkit-mask:url(https://cdn.ezca.asia/img/star.svg)no-repeat center center!important;mask:url(https://cdn.ezca.asia/img/star.svg)no-repeat center center!important;}.ezca-star-half{-webkit-mask:url(https://cdn.ezca.asia/img/star-half.svg)no-repeat center center!important;mask:url(https://cdn.ezca.asia/img/star-half.svg)no-repeat center center!important;}.ezca-star-empty{-webkit-mask:url(https://cdn.ezca.asia/img/star-empty.svg)no-repeat center center!important;mask:url(https://cdn.ezca.asia/img/star-empty.svg)no-repeat center center!important;}",l+=".ezca-reviews-lg-open{"+t("position","fixed")+t("top","0")+t("left","0")+t("height","100%")+t("z-index",rt)+"}",ti(l,"product-reviews-style"),o=document.getElementsByClassName("ezca-reviews-badge-empty"),o&&o.length>0)for(badge of o)badge.innerHTML=fi(0,0),badge.classList.add("ezca-reviews-badge");if(n.isCafe24&&(s=!0,r=document.querySelectorAll("[id^='anchorBoxId']"),r&&r.length!==0||(r=document.querySelectorAll("[data-no]"),s=!1),r&&r.length>0)){f=[];for(prdBox of r)h=s?{id:prdBox.id,productId:prdBox.id.replace("anchorBoxId_","")}:{id:prdBox.id,productId:prdBox.getAttribute("data-no")},isNaN(h.productId)||f.find(n=>n.productId==h.productId)||f.push(h);a=`${n.apiUrl}/api/ProductReview/GetInfoByProduct`;fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({websiteId:n.wid,productIds:f.map(n=>n.productId)})}).then(n=>n.json()).then(n=>{var i,t,r;if(n.success){n.data=n.data||[];for(prd of f)if(i=s?document.querySelectorAll(`[id^='${prd.id}'] div.description`):document.querySelectorAll(`[data-no="${prd.productId}"] > div`),i&&i.length>0)for(elmName of i)t=n.data.find(n=>n.id==prd.productId),r=document.createElement("div"),r.innerHTML=fi(t?t.count:0,t?t.avgPoint:0),r.classList.add("ezca-reviews-badge"),elmName.appendChild(r)}})}}y()==="product"&&ei()}function fr(){const t=n.data.whatsAppConfig;if(t){const i="ezca-whatsapp-livechat",r=document.getElementById(i);if(!r){const n=document.createElement("div");n.id=i;n.style.display="block";n.style.position="fixed";n.style.bottom="30px";n.style.left=t.position==="left"?"30px":"unset";n.style.right=t.position==="right"?"30px":"unset";n.style.width=t.buttonSize+"px";n.style.height=t.buttonSize+"px";n.style.background=`url(https://cdn.ezca.asia/img/icons/whatsapp/_icon_${t.icon}.svg) center center / cover no-repeat`;n.style.cursor="pointer";n.onclick=function(){window.open(`https://wa.me/${t.phoneNumber}?text=${encodeURIComponent(t.textMessage)}`,"_blank")};document.body.appendChild(n)}}}function fi(n,t){for(var i="",r=1;r<6;r++)i+=t>=r?"<div class='ezca-star'><\/div>":t>0&&!i.Contains("half")?"<div class='ezca-star-half'><\/div>":"<div class='ezca-star-empty'><\/div>";return i+`<span>(${n})</span>`}function ei(){var r,u,i;if(n.isHaravan){if(r=document.getElementById("ezca-product-reviews"),!r){setTimeout(ei,5e3);return}if(r.tagName!="DIV"){const t=document.getElementById("wrap_ezca-product-reviews");let u=`{
                      "@context": "https://schema.org/",
                      "@type": "Product",
                      "name": "${t.getAttribute("data-title")}",
                      "image": "${t.getAttribute("data-img")}",
                      "review": {
                        "@type": "Review",
                        "reviewRating": {
                          "@type": "Rating",
                          "ratingValue": "5",
                          "bestRating": "5"
                        },
                        "author": {
                          "@type": "Person",
                          "name": "Customer"
                        }
                      },
                      "aggregateRating": {
                        "@type": "AggregateRating",
                        "ratingValue": "5",
                        "reviewCount": "1"
                      }
                    }`;if(typeof initEzCaReviews=="function"){initEzCaReviews();const n=ht(dataEncode);if(n.data&&n.data.productReviewExt.countRating>0){const i=n.data.productReviewExt.productReviews[0];u=`{
                      "@context": "https://schema.org/",
                      "@type": "Product",
                      "name": "${t.getAttribute("data-title")}",
                      "image": "${t.getAttribute("data-img")}",
                      "review": {
                        "@type": "Review",
                        "name": "${i.title}",
                        "reviewBody": "${i.content}",
                        "reviewRating": {
                          "@type": "Rating",
                          "ratingValue": "${i.rating}",
                          "bestRating": "5"
                        },
                        "author": {
                          "@type": "Person",
                          "name": "${i.name}"
                        }
                      },
                      "aggregateRating": {
                        "@type": "AggregateRating",
                        "ratingValue": "${n.data.productReviewExt.averageRating}",
                        "reviewCount": "${n.data.productReviewExt.countRating}"
                      }
                    }`}}const i=document.createElement("script");i.setAttribute("type","application/ld+json");i.textContent=u;document.head.appendChild(i);n.data.productReviewConfig.planId=lt("ProductReviews");document.location.hostname!=="lamthaocosmetics.vn"||t.getAttribute("data-customer-email")||(n.data.productReviewConfig.requiredLogin=!0);r.contentWindow.postMessage({type:"product-reviews",key:"setConfig",value:n.data.productReviewConfig},n.engageUrl);n.iframeIds.push(r.id);return}if(!window.meta)return;u=`${n.apiUrl}/api/ProductReview/InitProductReview/${n.wid}/${window.meta.product.id}`;fetch(u,{method:"POST"}).then(n=>n.json()).then(()=>{window.location.reload()})}else if(n.isCafe24){const r=document.getElementById("wrap_ezca-product-reviews");if(r){i=localStorage.getItem("language");switch(i){case"vn":i="vi_VN";break;case"kr":i="ko_KR";break;default:i=CAFE24.FRONT_LANGUAGE_CODE}const u=document.createElement("iframe");u.id="ezca-product-reviews";u.src=`https://engage.ezca.asia/product-reviews/${r.getAttribute("data-id")}/${n.wid}?lng=${i}`;const f=t("width","100%")+t("border","0px")+t("min-height","250px");u.style=f;r.appendChild(u)}}}function er(){var i,r,o,f,e,u;n.data.socialProof&&(i=n.data.socialProof,i.position=n.mobile?i.mobilePosition:i.desktopPosition,r=document.createElement("iframe"),r.id=n.socialProofId,o=n.data.website.features,f={webId:n.wid,dh:document.location.hostname,id:r.id,displayTime:i.displayTime,waitTime:i.waitTime,planId:lt("SocialProof")},r.src=n.engageUrl+"/social-proof/"+encodeURIComponent(JSON.stringify(f)),e=t("width",n.mobile?"calc(100% - 16px)":"400px")+t("position","fixed")+t(i.position.includes("right")?"right":"left",n.mobile?"8px":"16px")+t(i.position.includes("bottom")?"bottom":"top","-200px")+t("z-index","2147483647")+t("transition","all 600ms")+t("border","0"),r.style=e,u=[],i.rounded&&u.push("ezca-rounded"),i.boxShadow&&u.push("ezca-box-shadow"),u.length>0&&(r.className=u.join(" ")),setTimeout(()=>{document.body.appendChild(r)},i.startDelayTime*1e3),n.iframeIds.push(r.id))}function or(i){var u,r,f;if(n.data.socialProof&&n.data.socialProof.boostViewingActive&&window.meta&&(i+=Math.floor(Math.random()*n.data.socialProof.boostViewing)-1,!(i<=0))&&(u=ii(window.meta.product.title,"h1"),u.length==0&&ii(window.meta.product.title,"div"),u.length>0)){if(r=document.getElementById("ezca-viewing"),r){if(f=r.getAttribute("x-count"),i<=parseInt(f))return}else r=document.createElement("div"),r.id="ezca-viewing",r.setAttribute("x-count",i),styles=t("font-size","14px")+t("padding","8px")+t("margin-bottom","8px")+t("border","1px solid #ccc")+t("border-radius","8px")+t("width","fit-content")+"",r.style=styles;r.innerHTML=`<img src="https://cdn.ezca.asia/img/users.svg" style="width: 24px;margin-right: 4px;" />
                                 <b>Bạn</b> và <b>${i}</b> người khác đang xem sản phẩm này`;ri(u[0],r)}}function a(t,i){if(n.logicData[t]=i,typeof jsonLogic=="object")try{vt(t,"popup-banner");vt(t,"popup");vt(t,"wheel-fortune")}catch(r){console.log("Error in setLogicData: ",r)}}function vt(t,i){var f=i=="popup"?n.data.forms:i=="wheel-fortune"?n.data.wheelFortunes:i=="popup-banner"?n.data.popupBanners:null,e,s,o,c,a;if(f&&f.length!=0&&n.isActiveTab){e=f.filter(t=>!n.popupOpens.includes(t.id));for(s in e){var u=e[s],h=`${i}_${u.id}`,r=sessionStorage.getItem(h);r=r?parseInt(r):0;o=JSON.parse(u.jsonLogic);o.data.hasOwnProperty(t)&&typeof jsonLogic.apply=="function"&&(n.logicData.countShow=r,c=jsonLogic.apply(o.logic,n.logicData),a=l("hide_"+u.id),c&&!a&&(r++,sessionStorage.setItem(h,r),n.popupOpens.push(u.id),hr(u,i)))}}}function sr(){var i,t;c(document,"mouseout",function(n){n=n?n:window.event;var t=n.relatedTarget||n.toElement;t&&t.nodeName!="HTML"||a("exitPage",!0)});c(window,"scroll",function(){i&&clearTimeout(i);i=setTimeout(()=>{a("scrollPage",ir())},300)});t=document.createElement("style");t.id="ezcaPopupCustomCss";t.innerHTML=".ezca-popup-ontop{top:0!important;}";document.head.appendChild(t);c(window,"resize",function(){var i,t;if(n.mobile&&w.width==window.innerWidth)if(w.height>window.innerHeight)for(i=document.getElementsByClassName("ezca-popup"),t=0;t<i.length;t++)i[t].classList.add("ezca-popup-ontop");else for(i=document.getElementsByClassName("ezca-popup"),t=0;t<i.length;t++)i[t].classList.remove("ezca-popup-ontop");w.width=window.innerWidth;w.height=window.innerHeight});c(document,"visibilitychange",function(){n.isActiveTab=document.visibilityState==="visible"})}function hr(i,r){var e=i.id,o,h,f,u,s;return document.getElementById(e)?(console.log("exists popup",e),!1):(o=n.data.device==1,h=[3],h.includes(i.type)||r=="wheel-fortune"||i.type=="wheel"?(f=document.createElement("div"),f.id="wrap_"+e,s=t("width","100%")+t("height","100%")+t("position","fixed")+t("top","0")+t("left","0")+t("background","#00000080")+t("display","flex")+t("justify-content","center")+t("align-items","center")+t("visibility","hidden")+t("z-index","2147483647")+"",f.style=s,f.setAttribute("x-display","flex"),document.body.appendChild(f),u=document.createElement("iframe"),u.id=e,u.src=`${n.engageUrl}/${r}/${e}`,s=t("width","100%")+t("max-width",o?"100%":"1024px")+t("max-height",o?"100%":"1024px")+t("border","0"),u.style=s,document.getElementById(f.id).appendChild(u),setTimeout(()=>{nt(f.id)},1e3),c(f,"click",function(){yt(f.id)}),n.iframeIds.push(u.id)):(u=document.createElement("iframe"),u.id=e,u.className="ezca-popup",u.src=`${n.engageUrl}/${r}/${e}`,s=t("width",o?"100%":"480px")+t("position","fixed")+t("bottom",o?"0":"16px")+t("right",o?"0":"16px")+t("visibility","hidden")+t("z-index","2147483647")+t("border","0"),u.style=s,document.body.appendChild(u),setTimeout(()=>{nt(e)},1e3),n.iframeIds.push(u.id)),!0)}function cr(){st(n.cdnUrl+"/js/logic.js","logic").then(()=>{sr(),a("url",document.location.href),a("referrer",document.referrer)})}function s(t,i,r){var f,e;r=r?r:"";f=ot();f.t="interactive";f.ec=t;f.ea=i;f.el=r;n.data.integrationss&&(e=n.data.integrationss.find(n=>n.type===1&&n.active),e&&(f.tid=e.identity));!n.preview&&u&&u.emit("event",f)}function nt(n){var t=document.getElementById("wrap_"+n);t||(t=document.getElementById(n));t&&lr(t)}function yt(n){var t=document.getElementById("wrap_"+n);t||(t=document.getElementById(n));t&&ar(t);g("hide_"+n,!0,1/288)}function lr(n,t){if(n)if(t=t?t:300,n.style.opacity=0,n.style.filter="alpha(opacity=0)",n.style.display=n.getAttribute("x-display")?n.getAttribute("x-display"):"block",n.style.visibility="visible",t)var i=0,r=setInterval(function(){i+=50/t;i>=1&&(clearInterval(r),i=1);n.style.opacity=i;n.style.filter="alpha(opacity="+i*100+")"},50);else n.style.opacity=1,n.style.filter="alpha(opacity=1)"}function ar(n,t){if(n)if(t=t?t:300,t)var i=1,r=setInterval(function(){i-=50/t;i<=0&&(clearInterval(r),i=0,n.style.display="none",n.style.visibility="hidden");n.style.opacity=i;n.style.filter="alpha(opacity="+i*100+")"},50);else n.style.opacity=0,n.style.filter="alpha(opacity=0)",n.style.display="none",n.style.visibility="hidden"}function oi(t){let i={clientEventId:ut(),eventName:t,pageTitle:document.title,url:document.location.toString(),referral:document.referrer,userId:e(),websiteId:n.wid};return i.firstView=n.firstView,n.isHaravan&&window.meta&&(i.details={resourceType:window.meta.page.pageType||window.meta.page.resourceType,resourceId:window.meta.page.resourceId||0}),i}function vr(){function i(t,i,r){var u=document.getElementById(t);u&&u.contentWindow.postMessage({type:r,key:"setData",value:i},n.engageUrl)}function r(n,t){var i=document.getElementById(n);i&&(i.style.height=t+"px")}function f(){var i=t("z-index","2147483647")+t("position","fixed")+t("border","0"),r=n.data.menu.menuTemplates.find(t=>t.device===n.data.device),f;["top","right","bottom","left"].forEach(n=>{i+=r.position.includes(n)?t(n,"0"):""});r.position.includes("middle")&&(i+=t("top","50%"),i+=t("transform","translateY(-50%)"));var u=r.position.includes("center");return u&&(i+=t("right","50%"),i+=t("transform","translateX(50%)")),f=56*n.data.menu.menuButtons.length+16,i+=t("width",u?"100%":"64px")+t("height",(u?"60":f)+"px")}function o(){var t,i;(n.data.menu&&n.data.menu.active||n.preview)&&(t=document.getElementById(n.rootId),t&&t.remove(),t=document.createElement("div"),t.id=n.rootId,i=document.createElement("iframe"),i.id=n.menuId,i.src=n.engageUrl+"/menu",i.style=f(),t.appendChild(i),document.body.appendChild(t))}var u,c;if(ti(".ezca-rounded{border-radius:10px!important;}.ezca-box-shadow{box-shadow:rgba(0,0,0,0.6) 0 0 5px!important;}","ezca-custom-style"),window.addEventListener("message",u=>{var h,b,d,p,g,w,l,v,rt,a,tt,it,y,c;try{if(h=u.data,b={uid:e(),wid:k(),location:document.location.toString(),dh:document.location.hostname,isMobile:n&&n.data&&n.data.device==1},h.type=="popup"||h.type=="form"||h.type=="wheel-fortune"||h.type=="popup-banner"){d=h.type=="wheel-fortune";switch(h.key){case"getData":if(p=d?n.data.wheelFortunes:n.data.forms,!p||p.length==0)return;l=p.find(n=>n.id==h.value.id);l.parent=b;i(l.id,l,h.type);break;case"updateHeight":g=n.data.device==1;w=Math.min(screen.height,h.value.height);d&&g&&(w=screen.height);r(h.value.id,w);g&&(a=document.getElementById(h.value.id),a&&(a.style.top=(screen.height-w)/2+"px"));break;case"close":yt(h.value.id);n.data.popupBanners&&(l=n.data.popupBanners.find(n=>n.id==h.value.id),l&&l.sidebar.type=="1"&&!document.getElementById(`sidebar_${l.id}`)&&(v=document.createElement("div"),v.id=`sidebar_${l.id}`,v.innerText=l.sidebar.buttonText,rt=t("position","fixed")+t("top","50%")+t(l.sidebar.position,"-43px")+t("transform",l.sidebar.position=="left"?"rotate(90deg)":"rotate(-90deg)")+t("padding",".5rem")+t("cursor","pointer")+t("background-color",l.sidebar.backgroundColor)+t("color",l.sidebar.textColor),v.style=rt,v.onclick=function(){nt(l.id)},document.body.appendChild(v)))}}else if(h.type=="product-reviews")switch(h.key){case"updateHeight":r("ezca-product-reviews",h.value.height);break;case"toggle-lg":document.getElementById("ezca-product-reviews").classList.toggle("ezca-reviews-lg-open");break;default:console.log(h)}else if(h.type=="recommender")switch(h.key){case"updateHeight":r(n.recommId,h.value.height);break;default:console.log(h)}else if(h.type=="social-proof"){a=document.getElementById(h.value.id);switch(h.key){case"updateHeight":r(n.socialProofId,h.value.height);break;case"close":tt="-200px";n.data.socialProof.position.includes("bottom")?a.style.bottom=tt:a.style.top=tt;break;case"open":c=h.value.item;n.isHaravan?(c.link=`${window.location.origin}/products/${c.link}`,i(n.socialProofId,c,h.type)):n.isSapo&&(c.link=`${window.location.origin}/${c.link}`,i(n.socialProofId,c,h.type));setTimeout(function(){var t=n.mobile?"8px":"16px";n.data.socialProof.position.includes("bottom")?a.style.bottom=t:a.style.top=t},600);break;case"goto":window.location.replace(window.location.origin+h.value.link);break;default:console.log(h)}}else{h.type="menu";switch(h.key){case"getData":y=n.data.menu;y.parent=b;i(n.menuId,y,h.type);break;case"setDataFromApp":n.data||(n.data={});it=h.value;n.data.menu=h.value;n.data.device=it.parent.isMobile?1:2;document.getElementById(n.menuId)?(y=document.getElementById(n.menuId),y.style=f()):o();i(n.menuId,it,h.type);break;case"click":c=h.value;s("EzCa Menu",c.eventName,n.data.device==1?c.shortName:c.name);c.action===1?window.open(c.actionValue):c.action===1?window.open(c.actionValue,"_blank"):eval(c.actionValue)}}}catch(ut){console.log("Error in receive message: ",ut)}}),!n.preview){n.pageViewEventId=ut();u=`${n.apiUrl}/api/public/website/${n.wid}`;u+=n.isShopify?"?shop="+Shopify.shop:"";c=y()==="product"&&window.meta;let h=oi("page_view");h.clientEventId=n.pageViewEventId;fetch(u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)}).then(n=>n.json()).then(t=>{t.success&&(n.disabledTracking.includes(k())||n.isShopify||yr(),n.data=t.data,n.mobile=n.data.device==1,o(),rr(),ui(),er(),ur(n.data.productReviewConfig!=null),fr(),(n.data.forms&&n.data.forms.length>0||n.data.wheelFortunes&&n.data.wheelFortunes.length>0||n.data.popupBanners&&n.data.popupBanners.length>0)&&cr(),pr())})}}function si(n){var t={};for(d in n)n.hasOwnProperty(d)&&(t[d.replace(/(\_\w)/g,function(n){return n[1].toUpperCase()})]=n[d]);return t}function v(t,r){try{let u=oi(t);if(r.eventId=u.clientEventId,r.send_to=n.measurement_id,ezcaAnalytics("event",t,r),delete r.eventId,delete r.send_to,r=si(r),r.hasOwnProperty("items"))for(i in r.items)r.items[i]=si(r.items[i]),r.items[i].hasOwnProperty("price")&&(r.items[i].price=parseInt(r.items[i].price)/100);u.details&&Object.keys(r).forEach(function(n){u.details[n]=r[n]});return;const f=`${n.apiUrl}/api/public/Event`}catch(u){console.error(u)}}function yr(){try{let t=document.createElement("script");t.type="text/javascript";t.setAttribute("async","true");t.setAttribute("src","https://www.googletagmanager.com/gtag/js?id=G-SD7NHQVGFB");document.head.appendChild(t);const i="G-SD7NHQVGFB";n.measurement_id=i;t=document.createElement("script");t.innerHTML=`window.dataLayer = window.dataLayer || [];
                                function ezcaAnalytics(){dataLayer.push(arguments);}
                                ezcaAnalytics('js', new Date());
                                ezcaAnalytics('config', '${i}', {
                                    'cookie_prefix': '_ezca',
                                    'eventId': ${n.pageViewEventId},
                                    'clientId': ${e()},                                    
                                    'webId': '${n.wid}'
                                });`;document.head.appendChild(t);const u=XMLHttpRequest.prototype.open;if(XMLHttpRequest.prototype.open=function(){this.addEventListener("load",function(){try{const n=new b(this.responseURL.toLowerCase());if(this.readyState==4){const t=JSON.parse(this.response);switch(n.pathname){case"/cart/add.js":v("add_to_cart",{currency:"VND",value:t.price,items:[{item_id:t.product_id,item_name:t.product_title,price:t.price,quantity:t.quantity,item_brand:t.vendor,item_variant:t.variant_id,index:0}]})}}}catch(n){}});u.apply(this,arguments)},window.meta&&window.meta.page)switch(window.meta.page.pageType){case"cart":fetch("/cart.js").then(n=>n.json()).then(n=>{let t=n.items.map((n,t)=>({item_id:n.product_id,item_name:n.product_title,price:n.price,quantity:n.quantity,item_brand:n.vendor,item_variant:n.variant_id,index:t}));v("view_cart",{currency:"VND",value:n.total_price,items:t})});break;case"product":const n=window.meta.product;v("view_item",{items:[{item_id:n.id,item_name:n.title,price:n.price,item_brand:n.vendor}]});break;case"collection":if(!window.meta.page.resourceType)break;v("view_item_list",{item_list_id:window.meta.page.resourceId,item_list_name:document.location.pathname.replace("/collections/","")});break;case"searchresults":v("search",{search_term:f("q")})}const r=document.getElementsByName("q");r.length>0&&r.forEach(n=>{c(n,"keydown",function(n){tt&&clearTimeout(tt);tt=setTimeout(function(){v("search",{search_term:n.target.value});tt=null},1200)})})}catch(t){}}function pr(){const t=f("ezca_pr"),i=n.data.socialProof||n.data.recommender;if(t&&i){const r=ht(t),u=`${n.apiUrl}/api/public/UpdateCount/${i.id}`;fetch(u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:r.source,countClick:!0})})}}var it={v:"2024.07.18.01"},rt=2147483647,r=sessionStorage,bt=localStorage,h=n=>{let t="",i=crypto.getRandomValues(new Uint8Array(n));for(;n--;){let r=63&i[n];t+=r<36?r.toString(36):r<62?(r-26).toString(36).toUpperCase():r<63?"_":"-"}return t},w={width:window.innerWidth,height:window.innerHeight},o={isDev:function(){return!n.scriptSrc.includes("cdn")},isProd:function(){return n.scriptSrc.includes("https://cdn")},isBeta:function(){return n.scriptSrc.includes("https://betacdn")}},b=typeof URL=="function"?window.URL:function(n){var t=n.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);return t&&{href:n,protocol:t[1],host:t[2],hostname:t[3],port:t[4],pathname:t[5],search:t[6],hash:t[7]}},n={ezcaKey:"_ezca",uidKey:"__ezca_uid",newVisitorKey:"__ezca_new_visitor",sidKey:"__ezca_sid",tipKey:"__ezca_tip",tisKey:"__ezca_tis",pisKey:"__ezca_pis",actKey:"__ezca_activity",pvidKey:"__ezca_pvid",recentIdsKey:"__ezca_recent_ids",connectCount:0,productViewLog:null,currentPId:encodeURIComponent(window.location.pathname),logicData:{url:document.location.href,referrer:document.referrer},popupOpens:[],iframeIds:[],isActiveTab:!0,disabledTracking:["6231a3f3527397e49161665d","641974377e722e569655df8a",]},st,u,at,tt,p,hi,pt,wt;n.isShopify=typeof Shopify!="undefined";n.isCafe24=typeof CAFE24!="undefined";n.isHaravan=typeof Haravan!="undefined";n.isSapo=typeof Bizweb!="undefined";n.isWooCommerce=document.querySelector("body.woocommerce");n.isECommerce=n.isShopify||n.isCafe24||n.isHaravan||n.isSapo||n.isWooCommerce;n.wid=k()?k():document.location.hostname;n.apiUrl=o.isProd()?"https://api.ezca.asia":o.isBeta()?"https://betaapi.ezca.asia":"https://localhost:44341";n.apiUrl="https://api.ezca.asia";n.wssUrl=o.isProd()?"https://wss.ezca.asia":o.isBeta()?"https://wss.ezca.asia":"http://localhost:8000";n.cdnUrl=o.isProd()?"https://cdn.ezca.asia":o.isBeta()?"https://betacdn.ezca.asia":"http://cors.com";n.cdnUrl="https://cdn.ezca.asia";n.engageUrl=o.isProd()?"https://engage.ezca.asia":o.isBeta()?"https://betaengage.ezca.asia":"http://localhost:3001";n.engageUrl="https://engage.ezca.asia";n.preview=window.location.origin===n.engageUrl;n.rootId=n.preview?"ezca-root":h(16);n.menuId=n.preview?"ezca-menu":h(16);n.recommId=n.preview?"ezca-recommender":h(16);n.socialProofId=n.preview?"ezca-social-proof":h(16);st=(n,t)=>{if(t="ezca-"+t,!document.getElementById(t))return new Promise((i,r)=>{const u=document.createElement("script");u.type="text/javascript";u.onload=i;u.onerror=r;u.src=n;u.id=t;document.head.append(u)})};at=0;try{if(p=f("ezcaVerifyInstall"),p&&console.log("Start VerifyInstall"),window.opener&&n.wid==p){hi=n.apiUrl+"/api/public/VerifyInstall?"+vi({id:p,url:document.location.origin});li(hi,function(){p&&console.log("VerifyInstall Success")});return}if(!n.preview)try{pt=function(){g(n.actKey,"true",1/48)};pt();document.addEventListener("mousemove",pt);gt(n.tipKey,!1);gt(n.tisKey,!0);yi(n.pisKey)}catch(ci){console.error(ci)}wt=function(){pi();vr()};n.isHaravan&&y()==="product"&&!window.meta?Haravan.getProduct(document.location.pathname.replace("/products/",""),function(n){console.log("Init meta success");window.meta={page:{pageType:"product",resourceType:"product",resourceId:n.id},product:n};wt()}):wt()}catch(ci){console.error(ci)}return it}();