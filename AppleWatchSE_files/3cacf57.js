(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{1306:function(t,e,r){"use strict";r(935)},787:function(t,e,r){"use strict";r.r(e);r(62),r(22),r(91);var o=r(7),n=r(0),c=(r(8),r(33),r(64),r(36),r(169),r(47),r(48),r(9),r(56),r(52),r(23),r(55),r(82),r(26)),l=r(334);function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){Object(o.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var m={name:"HotSale",components:{ProductList:function(){return Promise.all([r.e(1),r.e(20)]).then(r.bind(null,1791))},PlaceHolderProductList:function(){return r.e(30).then(r.bind(null,2032))}},props:{altPrefix:{type:String,default:""},flashSale:{type:Object,default:function(){return{}}},relHref:{type:String,default:""},listProduct:{type:Object,default:function(){return{}}},useNameHeading:{type:Boolean,default:!0},hasBoxCountDown:{type:Boolean,default:!0},showDiscountPercent:{type:Boolean,default:!0},itemPerColumn:{type:Number,default:1},cateId:{type:Number,default:0},replacePrice:{type:String,default:""},showRating:{type:Boolean,default:!0},showTradePrice:{type:Boolean,default:!1},isHidePromotion:{type:Boolean,default:!0},isShowMore:{type:Boolean,default:!1},isRegister:{type:Boolean,default:!1},linkShowMore:{type:String,default:"#"},showMoreText:{type:String,default:"Xem tất cả sản phẩm"},appleWeek:{type:Boolean,default:!1},textNote:{type:String,default:""},showSticker:{type:Boolean,default:!0},isHidePrice:{type:Object,default:function(){return{status:!1,letters:0}}},isTradeInType:{type:Boolean,default:!1},isAutoplay:{type:Boolean,default:!0},pushViewList:{type:Boolean,default:!1},titlePageDetail:{type:Boolean,default:!1},sortProductList:{type:String,default:"view: desc"},datalayerInfo:{type:Object,default:function(){return{push:!1,itemListId:"",itemListName:""}}},popupType:{type:String,default:""}},data:function(){return{placeholder:"https://cdn2.cellphones.com.vn/200x50/media/wysiwyg/placehoder.png",loading:!0,ratingData:{},titleImage:"",timer:"",end:0,start:0,appear:0,interval:0,timeGroup:{},days:"",minutes:"",hours:"",seconds:"",statusType:"",message:"",activeGroup:0,selectedListProduct:"",timeCallApi:0,dataProducts:{},disableTab:[],disableHotsale:!0,loadingHotSale:!1,optionSwiper:{slidesPerView:5,slidesPerGroup:1,spaceBetween:10,slidesPerColumn:this.itemPerColumn,slidesPerColumnFill:"row",loop:!1,autoplay:{delay:5e3,pauseOnMouseEnter:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{20:{slidesPerView:2},717:{slidesPerView:3},990:{slidesPerView:4},1200:{slidesPerView:5}}},optionNoneAutoplay:{slidesPerView:5,slidesPerGroup:1,spaceBetween:10,slidesPerColumn:this.itemPerColumn,slidesPerColumnFill:"row",loop:!1,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{20:{slidesPerView:2},717:{slidesPerView:3},990:{slidesPerView:4},1200:{slidesPerView:5}}}}},fetch:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.resetData(),e.next=3,t.checkActive();case 3:Object.keys(t.productListGroup||{}).length>0&&t.selectedListProduct?t.dataProducts=t.productListGroup:t.disableHotsale=!0,t.titleImage=t.$device.isDesktop?t.listProduct.titleDesktop:t.listProduct.titleMobile;case 5:case"end":return e.stop()}}),e)})))()},computed:h(h(h(h({},Object(c.e)("product",["productListGroup","infoGroupHotsale","listPriceGroupHotsale","listReviewData"])),Object(c.e)("pdp-trade",["productTradePromotions"])),Object(c.e)("province",["province"])),{},{listProductLength:function(){return Object.keys(this.listProduct.listGroup||{}).length}}),beforeDestroy:function(){clearInterval(this.interval)},beforeCreate:function(){this.ratingData={},this.titleImage="",this.timer="",this.end=0,this.start=0,this.appear=0,this.interval=0,this.timeGroup={},this.days="",this.minutes="",this.hours="",this.seconds="",this.statusType="",this.message="",this.activeGroup=0,this.selectedListProduct="",this.timeCallApi=0,this.dataProducts={},this.disableTab=[],this.disableHotsale=!0,this.loadingHotSale=!1},mounted:function(){var t=this;this.hasBoxCountDown&&(this.interval=setInterval(Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.timerCount(t.start,t.end,t.appear),e.next=3,t.checkActiveTab();case 3:case"end":return e.stop()}}),e)}))),1e3)),Object.keys(this.productListGroup||{}).length>0&&this.pushViewList&&this.$emit("emitCall",this.dataProducts[Object.keys(this.dataProducts||{})]),this.datalayerInfo.push&&this.pushToGA({productList:this.filterProductList(this.dataProducts[this.selectedListProduct]?this.dataProducts[this.selectedListProduct]:[]),regionName:12869===this.province.company_id?"Miền Nam_7":"Miền Bắc_1",provinceId:this.province.id,itemListId:this.datalayerInfo.itemListId,itemListName:this.datalayerInfo.itemListName})},methods:h(h(h({pushToGA:l.f},Object(c.b)("product",["getProductsByGroupNameGraph"])),Object(c.d)("product",["resetListGroup"])),{},{timerCount:function(t,e,r){var o=(new Date).getTime(),n=e-o,c=t-o,l=r-o;c<0&&n<0?(this.statusType="expired",this.disableHotsale=!0,clearInterval(this.interval)):c>0&&n>0&&l>0?(this.statusType="disappear",this.disableHotsale=!0,clearInterval(this.interval)):c<0&&n>0?(this.calcTime(n),this.statusType="running",this.message="Kết thúc sau:"):c>0&&n>0&&(this.calcTime(c),this.statusType="upcoming",this.message="Bắt đầu sau:")},calcTime:function(t){this.days=Math.floor(t/864e5),this.hours=Math.floor(t%864e5/36e5),this.minutes=Math.floor(t%36e5/6e4),this.seconds=Math.floor(t%6e4/1e3)},setActive:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var o,n,c,l,d,h;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.switchLoading(!0),e.activeGroup=t,n=null===(o=e.listProduct.listGroup[t])||void 0===o?void 0:o.groupUd,e.$emit("selected-ud",n),e.selectedListProduct=n,Object.keys(e.productListGroup).includes(n)||!(e.timeCallApi<e.listProductLength)){r.next=11;break}return e.loading=!0,e.timeCallApi++,r.next=10,e.getProductsByGroupNameGraph({ud:n,cateId:e.cateId,isGetRating:e.showRating,isGetTrade:e.showTradePrice,sort:e.sortProductList});case 10:e.dataProducts=e.productListGroup;case 11:if(!e.hasBoxCountDown||!e.infoGroupHotsale[e.selectedListProduct]){r.next=21;break}return e.timeGroup[e.selectedListProduct]||(e.timeGroup[e.selectedListProduct]={},e.timeGroup[e.selectedListProduct].end=new Date(e.infoGroupHotsale[e.selectedListProduct].to_date).getTime(),e.timeGroup[e.selectedListProduct].start=new Date(e.infoGroupHotsale[e.selectedListProduct].from_date).getTime(),e.timeGroup[e.selectedListProduct].appear=new Date(e.infoGroupHotsale[e.selectedListProduct].start_countdown_time).getTime()),e.end=null===(c=e.timeGroup[e.selectedListProduct])||void 0===c?void 0:c.end,e.start=null===(l=e.timeGroup[e.selectedListProduct])||void 0===l?void 0:l.start,e.appear=null===(d=e.timeGroup[e.selectedListProduct])||void 0===d?void 0:d.appear,e.timerCount(e.start,e.end,e.appear),r.next=19,e.checkActiveTab();case 19:r.next=27;break;case 21:if(!e.hasBoxCountDown||e.infoGroupHotsale[e.selectedListProduct]){r.next=27;break}if(e.disableTab.push(e.activeGroup),Object.keys(e.listProduct.listGroup||{}).length===e.disableTab.length&&(e.disableHotsale=!0),!(parseInt(e.activeGroup)+1<Object.keys(e.listProduct.listGroup||{}).length)){r.next=27;break}return r.next=27,e.setActive(null===(h=parseInt(e.activeGroup)+1)||void 0===h?void 0:h.toString());case 27:e.loading=!1,e.switchLoading(!1);case 29:case"end":return r.stop()}}),r)})))()},formatTime:function(t){return("0"+t).slice(-2)},statusHotSale:function(t){return!["disappear","expired"].includes(t)},checkActive:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.hasBoxCountDown){e.next=14;break}e.t0=regeneratorRuntime.keys(t.listProduct.listGroup);case 2:if((e.t1=e.t0()).done){e.next=12;break}return r=e.t1.value,e.next=6,t.setActive(r);case 6:if(!t.statusHotSale(t.statusType)){e.next=10;break}return t.disableHotsale=!1,t.$isServer||(t.interval=setInterval(Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.timerCount(t.start,t.end,t.appear),e.next=3,t.checkActiveTab();case 3:case"end":return e.stop()}}),e)}))),1e3)),e.abrupt("break",12);case 10:e.next=2;break;case 12:e.next=17;break;case 14:return e.next=16,t.setActive("0");case 16:t.disableHotsale=!1;case 17:case"end":return e.stop()}}),e)})))()},switchLoading:function(t){this.loadingHotSale=t},addDataLayer:function(t){Object(l.f)({productList:t,regionName:12869===this.province.company_id?"Miền Nam_7":"Miền Bắc_1",provinceId:this.province.id})},checkActiveTab:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object.keys(t.listProduct.listGroup||{}).length!==t.disableTab.length){e.next=4;break}t.disableHotsale=!0,e.next=8;break;case 4:if(t.statusHotSale(t.statusType)||!(t.activeGroup<Object.keys(t.listProduct.listGroup||{}).length)){e.next=8;break}return t.disableTab.push(t.activeGroup),e.next=8,t.setActive(null===(r=parseInt(t.activeGroup)+1)||void 0===r?void 0:r.toString());case 8:case"end":return e.stop()}}),e)})))()},resetData:function(){this.ratingData={},this.titleImage="",this.timer="",this.end=0,this.start=0,this.appear=0,this.interval=0,this.timeGroup={},this.days="",this.minutes="",this.hours="",this.seconds="",this.statusType="",this.message="",this.activeGroup=0,this.selectedListProduct="",this.timeCallApi=0,this.dataProducts={},this.disableTab=[],this.disableHotsale=!0,this.loadingHotSale=!1,this.resetListGroup()},filterProductList:function(t){return t.filter((function(t){return 46===t.filterable.company_stock_id||46===t.filterable.stock_available_id}))}})},v=(r(1306),r(74)),component=Object(v.a)(m,(function(){var t=this,e=t._self._c;return e("div",[t.disableHotsale?0!==t.appear&&Object.keys(t.dataProducts||{}).length>0&&t.selectedListProduct?e("div",{staticClass:"block-hot-sale",style:{background:t.listProduct.background_image?"url('".concat(t.listProduct.background_image,"') no-repeat"):"linear-gradient(to bottom,"+t.listProduct.colorTop+","+t.listProduct.colorBot+")","background-size":"cover"}},[e("PlaceHolderProductList",{attrs:{"title-height":20,"number-of-line":t.itemPerColumn,"number-of-product":5}})],1):e("div"):e("div",{staticClass:"block-hot-sale",style:{background:t.listProduct.background_image?"url('".concat(t.listProduct.background_image,"') no-repeat"):"linear-gradient(to bottom,"+t.listProduct.colorTop+","+t.listProduct.colorBot+")","background-size":"cover"}},[t.titlePageDetail?e("div",{staticClass:"box-title"},[""!==t.selectedListProduct&&t.infoGroupHotsale[t.selectedListProduct]?e("h2",{staticClass:"title-page-detail"},[t._v(t._s(t.infoGroupHotsale[t.selectedListProduct].product_group_name))]):t._e()]):e("div",{staticClass:"box-title",class:{"mobile-title":!t.$device.isDesktop}},[e("RenderHtml",{staticClass:"title-image",class:t.hasBoxCountDown||"full",attrs:{html:t.titleImage}}),t._v(" "),t.listProductLength>1?e("div",{staticClass:"box-tab-menu"},t._l(t.listProduct.listGroup,(function(r,o){return e("p",{key:o,staticClass:"box-tab-item button__select-tab",class:{active:o===t.activeGroup,deactive:t.disableTab.includes(o)||t.loadingHotSale},style:{"background-color":o===t.activeGroup?t.listProduct.color_theme:t.listProduct.color_theme_inactive,color:o===t.activeGroup?t.listProduct.color_theme_contrast:t.listProduct.color_theme_contrast_inactive},on:{click:function(e){return t.setActive(o)}}},[t._v("\n          "+t._s(r.groupTitle))])})),0):t._e(),t._v(" "),t.hasBoxCountDown?e("div",{staticClass:"box-countdown",class:{"with-box-tab":t.listProductLength>1}},[e("p",{staticClass:"title",style:{color:t.listProduct.color_theme||""}},[t._v(t._s(t.message)+" ")]),t._v(" "),e("ul",{staticClass:"box-time"},[e("li",{style:{color:t.listProduct.color_theme||""}},[e("p",{staticClass:"time",style:{color:t.listProduct.color_theme_contrast||"",background:t.listProduct.color_theme}},[t._v("\n              "+t._s(t.formatTime(t.days)))]),t._v(" "),e("p",{staticClass:"separate"},[t._v(":")])]),t._v(" "),e("li",{style:{color:t.listProduct.color_theme||""}},[e("p",{staticClass:"time",style:{color:t.listProduct.color_theme_contrast||"",background:t.listProduct.color_theme}},[t._v("\n              "+t._s(t.formatTime(t.hours)))]),t._v(" "),e("p",{staticClass:"separate"},[t._v(":")])]),t._v(" "),e("li",{style:{color:t.listProduct.color_theme||""}},[e("p",{staticClass:"time",style:{color:t.listProduct.color_theme_contrast||"",background:t.listProduct.color_theme}},[t._v("\n              "+t._s(t.formatTime(t.minutes)))]),t._v(" "),e("p",{staticClass:"separate"},[t._v(":")])]),t._v(" "),e("li",{style:{color:t.listProduct.color_theme||""}},[e("p",{staticClass:"time",style:{color:t.listProduct.color_theme_contrast||"",background:t.listProduct.color_theme}},[t._v("\n              "+t._s(t.formatTime(t.seconds)))]),t._v(" "),e("p",{staticClass:"separate",staticStyle:{margin:"unset"}})])])]):t._e()],1),t._v(" "),t.textNote?e("span",{staticClass:"text-note"},[t._v(t._s(t.textNote))]):t._e(),t._v(" "),Object.keys(t.dataProducts||{}).length>0?e("div",{staticClass:"box-content"},[t._l(t.dataProducts,(function(r,o){var n;return e("ProductList",{directives:[{name:"show",rawName:"v-show",value:t.selectedListProduct===o,expression:"selectedListProduct === key"}],key:o,attrs:{ud:o,"custom-box-promo-price":(null===(n=t.listProduct.listGroup[t.activeGroup])||void 0===n?void 0:n.customBoxPromoPrice)||{},"item-per-column":t.itemPerColumn,"list-product":t.filterProductList(r),"is-show-discount-percent":t.showDiscountPercent,"list-review":t.listReviewData["".concat(t.selectedListProduct)],"is-hide-promotion":t.isHidePromotion,"is-hide-promotion-hotsale":!1,"show-sticker":t.showSticker,"is-hide-price":t.isHidePrice,"is-register":t.isRegister,"replace-price":t.replacePrice,"list-trade-promotion":t.productTradePromotions["".concat(t.selectedListProduct)],"is-trade-in-type":t.isTradeInType,"option-swiper":t.isAutoplay?t.optionSwiper:t.optionNoneAutoplay,"tracking-itm":"","rel-href":t.relHref,"show-smember-price":!1,"use-name-heading":t.useNameHeading,"popup-type":t.popupType,"alt-prefix":t.altPrefix}})})),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]},[e("p",{staticClass:"loading-text"},[t._v("Đang tải ...")])]),t._v(" "),t.isShowMore?e("div",{staticClass:"show-more"},[e("a",t._b({staticClass:"btn-show-more",attrs:{target:"_blank",rel:"noopener"}},"a",{href:t.linkShowMore},!1),[t._v(t._s(t.showMoreText))])]):e("div"),t._v(" "),t.listProduct.listGroup[t.activeGroup]&&t.listProduct.listGroup[t.activeGroup].extendUrl?e("a",t._b({staticClass:"extend-url has-text-centered",attrs:{target:"_blank"}},"a",{href:"".concat(t.listProduct.listGroup[t.activeGroup].extendUrl)},!1),[t._v("Xem thêm sản phẩm\n      ")]):e("div")],2):t._e()])])}),[],!1,null,null,null);e.default=component.exports},935:function(t,e,r){t.exports={}}}]);