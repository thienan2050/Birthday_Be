(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{1176:function(t,e,n){t.exports={}},1631:function(t,e,n){"use strict";n(1176)},2039:function(t,e,n){"use strict";n.r(e);n(46),n(36),n(47),n(48),n(22),n(23);var o=n(28),r=n(0),c=n(7),l=(n(15),n(33),n(62),n(169),n(9),n(91),n(8),n(26));function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){Object(c.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var h={name:"BoxOnStockStores",data:function(){return{listProvinceAvailable:[],listDistrictFilter:[],listStoreAvailableFilter:[],listStoreAvailable:[],listDistrictAvailableId:{},isLoading:!0,idGetShop:0,idsShopOnline:[1280,1281,103,156],idsShopDepot:[139,16]}},computed:v(v(v(v({},Object(l.e)("region",["regionId","listProvince","listDistrict"])),Object(l.e)("province",["listShopStock","province"])),Object(l.e)("product",["selectColorId","productId","childProductId"])),Object(l.e)("json-server",["jsonData"])),watch:{selectColorId:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.idGetShop===t.selectColorId){e.next=3;break}return e.next=3,t.getAvailableStore();case 3:t.isLoading=!1,(n=document.getElementById("districtOptions"))&&(n.selectedIndex=0),t.listDistrictFilter=Object(o.a)(t.listShopStock);case 7:case"end":return e.stop()}}),e)})))()},province:{deep:!0,handler:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.$cookies.get("cps_province_id")||0,console.log("Province Cookie Watch:",n),console.log("Province Vue Watch:",t.province.id),t.idGetShop===t.selectColorId&&Number(t.province.id)===Number(n)){e.next=6;break}return e.next=6,t.getAvailableStore();case 6:t.isLoading=!1,(r=document.getElementById("districtOptions"))&&(r.selectedIndex=0),t.listDistrictFilter=Object(o.a)(t.listShopStock);case 10:case"end":return e.stop()}}),e)})))()}}},mounted:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isLoading=!1,t.idGetShop===t.selectColorId){e.next=4;break}return e.next=4,t.getAvailableStore();case 4:case"end":return e.stop()}}),e)})))()},methods:v(v(v(v(v({},Object(l.b)("region",["handleChangeRegion"])),Object(l.b)("json-server",["getDataJsonServerGraphql"])),Object(l.b)("province",["getShopStockGraphql"])),Object(l.d)("province",["toggleModalChangeProvince"])),{},{getAvailableStore:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isLoading=!0,t.idGetShop=t.selectColorId,n=t.$cookies.get("cps_province_id")||t.province.id,console.log("Province getAvailableStore:",n),e.next=6,t.getShopStockGraphql(t.selectColorId||t.productId);case 6:return r=Object(o.a)(t.listShopStock),e.next=9,r.reduce((function(t,e){return[].concat(Object(o.a)(t),Object(o.a)(e.shops))}),[]);case 9:t.listStoreAvailable=e.sent,t.listStoreAvailable=t.listStoreAvailable.filter((function(e){return!t.idsShopOnline.includes(e.external_id)&&!t.idsShopDepot.includes(e.external_id)})),t.handleChangeProvince(n);case 12:case"end":return e.stop()}}),e)})))()},handleChangeProvince:function(t){this.listStoreAvailableFilter=this.listStoreAvailable.filter((function(e){return e.province_id===parseInt(t)})),this.listDistrictFilter=Object(o.a)(this.listShopStock),this.isLoading=!1},handleChangeDistrict:function(t){this.listStoreAvailableFilter=""===t?this.listStoreAvailable:this.listStoreAvailable.filter((function(e){return e.district_id===parseInt(t)}))}})},f=(n(1631),n(74)),component=Object(f.a)(h,(function(){var t,e=this,n=e._self._c;return e.listStoreAvailable.length>0?n("div",{staticClass:"box-on-stock-stores"},[n("div",{staticClass:"box-on-stock-options"},[n("div",{staticClass:"box-on-stock-option-location is-flex is-justify-content-space-between"},[n("button",{staticClass:"box-on-stock-option button__change-province",on:{click:function(t){return e.toggleModalChangeProvince({condition:!0})}}},[e._v("\n        "+e._s(e.province.name)+"\n      ")]),e._v(" "),n("select",{staticClass:"box-on-stock-option",attrs:{id:"districtOptions"},on:{change:function(t){return e.handleChangeDistrict(t.target.value)}}},[n("option",{attrs:{selected:"",value:""}},[e._v("Quận/Huyện")]),e._v(" "),e._l(e.listDistrictFilter,(function(t,o){return n("option",{key:o,staticClass:"button__change-district",domProps:{value:t.district_id}},[e._v("\n          "+e._s("".concat(t.district_name))+"\n        ")])}))],2)])]),e._v(" "),n("p",{staticClass:"box-on-stock-count"},[e._v("Có "),n("strong",[e._v(e._s((null===(t=e.listStoreAvailableFilter)||void 0===t?void 0:t.length)||0))]),e._v(" cửa hàng có sản phẩm")]),e._v(" "),!e.isLoading&&e.listStoreAvailableFilter.length>0?n("div",{staticClass:"box-on-stock-address"},e._l(e.listStoreAvailableFilter,(function(t,o){return n("div",{key:o,staticClass:"box-on-stock-item p-2 is-flex"},[t.phone?n("RenderHtml",{staticClass:"icon-cps",attrs:{html:e.$icons().Phone}}):e._e(),e._v(" "),t.phone?n("div",{staticClass:"phone"},[n("a",e._b({staticClass:"has-text-weight-semibold button__call"},"a",{href:"tel:".concat(t.phone)},!1),[e._v(e._s(t.phone))])]):e._e(),e._v(" "),n("div",{staticClass:"address",attrs:{title:t.address}},[e._v("\n         – "),n("a",e._b({staticClass:"button__link-to-map is-flex is-align-items-center",attrs:{target:"_blank",rel:"noopener nofollow"}},"a",{href:t.google_link},!1),[n("svg",{attrs:{height:"15",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512"}},[n("path",{attrs:{d:"M168.3 499.2C116.1 435 0 279.4 0 192C0 85.96 85.96 0 192 0C298 0 384 85.96 384 192C384 279.4 267 435 215.7 499.2C203.4 514.5 180.6 514.5 168.3 499.2H168.3zM192 256C227.3 256 256 227.3 256 192C256 156.7 227.3 128 192 128C156.7 128 128 156.7 128 192C128 227.3 156.7 256 192 256z"}})]),e._v("\n        "+e._s(t.address))])])],1)})),0):e._e(),e._v(" "),e.isLoading?n("div",{staticClass:"loader-2 center"},[n("span")]):e._e()]):n("div")}),[],!1,null,"105bda60",null);e.default=component.exports}}]);