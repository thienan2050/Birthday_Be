(window.webpackJsonp=window.webpackJsonp||[]).push([[133],{1189:function(e,t,r){e.exports={}},1644:function(e,t,r){"use strict";r(1189)},2051:function(e,t,r){"use strict";r.r(t);r(22);var n=r(0),o=r(7),c=(r(8),r(15),r(33),r(60),r(36),r(47),r(48),r(9),r(35),r(56),r(52),r(67),r(23),r(55),r(82),r(26)),l=r(105);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m={name:"BoxSameProduct",components:{ProductList:function(){return Promise.all([r.e(1),r.e(20)]).then(r.bind(null,1791))},CrossSell:function(){return Promise.all([r.e(1),r.e(28),r.e(67)]).then(r.bind(null,2057))},ExchangeProducts:function(){return Promise.all([r.e(1),r.e(68)]).then(r.bind(null,2058))}},props:{listReview:{type:Object,default:function(){return{}}},productData:{type:Object,default:function(){return{}}},isNewProduct:{type:Boolean,default:!0}},data:function(){return{activeBlock:this.renderOptions?this.renderOptions[Object.keys(this.renderOptions)[0]]:"",options:{slidesPerView:5,slidesPerGroup:2,spaceBetween:10,slidesPerColumn:1,slidesPerColumnFill:"row",loop:!1,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{320:{slidesPerView:2,spaceBetween:10,slidesPerGroup:1,slidesPerColumn:this.slidesPerColumn,slidesPerColumnFill:"row"},540:{slidesPerView:2,spaceBetween:10,slidesPerGroup:1,slidesPerColumn:this.slidesPerColumn,slidesPerColumnFill:"row"},717:{slidesPerView:3.4,spaceBetween:10,slidesPerGroup:1,slidesPerColumn:this.slidesPerColumn,slidesPerColumnFill:"row"},768:{slidesPerView:3,spaceBetween:10,slidesPerGroup:1,slidesPerColumn:this.slidesPerColumn,slidesPerColumnFill:"row"},990:{slidesPerView:4,spaceBetween:10,slidesPerGroup:1,slidesPerColumn:this.slidesPerColumn,slidesPerColumnFill:"row"},1024:{slidesPerView:4,spaceBetween:10,slidesPerGroup:4,slidesPerColumn:this.slidesPerColumn,slidesPerColumnFill:"row"},1200:{slidesPerView:5,spaceBetween:10,slidesPerGroup:1,slidesPerColumn:this.slidesPerColumn,slidesPerColumnFill:"row"}}},inputSearch:"",searchData:[],loading:!1,searching:!1,accessoriesData:{},exchangeProductData:{},similarData:{},componentData:{},oldData:{},renderOptions:{}}},computed:v(v(v(v(v(v(v({},Object(c.e)("compare",["searchResults"])),Object(c.e)("cross-sell",["dataCombo"])),Object(c.e)("review",["reviewData"])),Object(c.e)("province",["province"])),Object(c.e)("product",["listProductUpSell","productId"])),Object(c.e)("pdp-trade",["exchangeProductSheetData"])),{},{renderTitle:function(){var e,t;return null!==(e=this.renderOptions)&&void 0!==e&&null!==(e=e[this.activeBlock])&&void 0!==e&&e.isExchange?"Bán máy cũ lên đời tiết kiệm hơn":null===(t=this.renderOptions)||void 0===t||null===(t=t[this.activeBlock])||void 0===t?void 0:t.title},sameProductLowPrice:function(){var e,t,r,n;return JSON.stringify((null===(e=this.productData.filterable)||void 0===e?void 0:e.special_price)-.1*(null===(t=this.productData.filterable)||void 0===t?void 0:t.special_price)||(null===(r=this.productData.filterable)||void 0===r?void 0:r.price)-.1*(null===(n=this.productData.filterable)||void 0===n?void 0:n.price))},sameProductHighPrice:function(){var e,t,r,n;return JSON.stringify((null===(e=this.productData.filterable)||void 0===e?void 0:e.special_price)+.1*(null===(t=this.productData.filterable)||void 0===t?void 0:t.special_price)||(null===(r=this.productData.filterable)||void 0===r?void 0:r.price)+.1*(null===(n=this.productData.filterable)||void 0===n?void 0:n.price))}}),watch:{inputSearch:function(){var e=this;clearTimeout(this.timeOut),this.loading=!0,this.timeOut=setTimeout(Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.inputSearch.length>=3)){t.next=4;break}return t.next=3,e.searchProductToCompare(e.inputSearch);case 3:e.searchResults&&(e.loading=!1);case 4:case"end":return t.stop()}}),t)}))),500)},activeBlock:function(){this.options={slidesPerView:5,slidesPerGroup:2,spaceBetween:10,slidesPerColumn:1,slidesPerColumnFill:"row",loop:!1,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{320:{slidesPerView:2},717:{slidesPerView:3.4},768:{slidesPerView:3},990:{slidesPerView:4},1200:{slidesPerView:5}}}}},mounted:function(){var e=this;this.$nextTick(Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isNewProduct){t.next=5;break}return t.next=3,Promise.all([e.getTradeProducts(),e.getListSimilar(),e.getOldProduct()]);case 3:t.next=7;break;case 5:return t.next=7,Promise.all([e.getTradeProducts(),e.getListSimilar()]);case 7:if(null===(r=e.productData.general)||void 0===r||!r.product_components){t.next=10;break}return t.next=10,e.getProductComponents(e.productData.general.product_components);case 10:for(o in n=[],e.renderOptions)e.renderOptions[o].show&&n.push(o);e.activeBlock=n[0];case 13:case"end":return t.stop()}}),t)}))))},methods:v(v(v(v(v({findCommonElements:l.m},Object(c.b)("review",["getListRatingGraphql"])),Object(c.b)("compare",["searchProductToCompare"])),Object(c.b)("product",["getListUpSellByProduct","getListUpsellByCateIds"])),Object(c.b)("pdp-trade",["getTradeProductLinked"])),{},{focusOutSearchInput:function(){var e=this;setTimeout((function(){e.searching=!1}),500)},newCompareUrl:function(path){return"/so-sanh"+this.$route.path.replace(".html","")+"-vs-"+(path=path.replace(".html",""))},handleClickItem:function(e){this.activeBlock=e},getListSimilar:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,o,c,l,d,v,m,data,h,f,P,w,O,k,x,C;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n="",o=(null===(r=e.productData.general)||void 0===r?void 0:r.categories)||[],c="",o.forEach((function(e){c+="/".concat(e.path)})),!e.findCommonElements(["132","927","861","169","758","201","158","588","207","495","426","781","981","1392"],c.split("/"))){t.next=8;break}n='["132"]',t.next=30;break;case 8:if(!e.findCommonElements(["944","420","725","279","368","275","280","369","2185","2184"],c.split("/"))){t.next=12;break}n='["944"]',t.next=30;break;case 12:if(!e.findCommonElements(["5","224","212","308","208","387","23","1119","1120","1530"],c.split("/"))){t.next=16;break}n='["5"]',t.next=30;break;case 16:if(!e.findCommonElements(["88","596","597","716","798","857","885","995","1296","1297","1403","1741","1742"],c.split("/"))){t.next=20;break}n='["88"]',t.next=30;break;case 20:if(!e.findCommonElements(["384","1494"],c.split("/"))){t.next=24;break}n='["384"]',t.next=30;break;case 24:if(0!==(null==o?void 0:o.length)&&o){t.next=26;break}return t.abrupt("return");case 26:d=null===(l=e.productData.general)||void 0===l||null===(l=l.categories)||void 0===l?void 0:l.map((function(e){return e.similar.split(",")})),v=[].concat.apply([],d),m=null==v?void 0:v.filter((function(e){return e})),n=JSON.stringify(m.map((function(e){return e.toString()})));case 30:return data=JSON.stringify({query:e.queryGraphqlStringProductS({categoriesId:n,isParent:"true",lowPriceRange:e.sameProductLowPrice,highPriceRange:e.sameProductHighPrice,typeFuntion:"SimilarProducts"}),variables:{}}),h=e.graphqlConfig(data),t.prev=32,t.next=35,e.$axios(h);case 35:if(200!==(f=t.sent).status){t.next=44;break}return k=[],x=null===(P=f.data.data.products)||void 0===P?void 0:P.filter((function(e){return null!==e.general})),t.next=41,null==x?void 0:x.forEach((function(e){k.push(e.general.product_id)}));case 41:C=null===(w=f.data.data.products)||void 0===w?void 0:w.filter((function(t){var r,n;return(null===(r=t.general)||void 0===r?void 0:r.product_id)!==(null===(n=e.productData.general)||void 0===n?void 0:n.product_id)&&t.filterable.stock>0})),e.similarData={title:"SẢN PHẨM TƯƠNG TỰ",items:C},Object.assign(e.renderOptions,{similar:{title:e.similarData.title,show:(null==e||null===(O=e.similarData.items)||void 0===O?void 0:O.length)>0,items:e.similarData.items}});case 44:t.next=49;break;case 46:t.prev=46,t.t0=t.catch(32),console.log(t.t0);case 49:case"end":return t.stop()}}),t,null,[[32,46]])})))()},getOldProduct:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var data,r,n,o,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return data=JSON.stringify({query:e.queryGraphqlStringProductS({stock:!0,sku:JSON.stringify(e.productData.general.sku),typeFuntion:"OldProducts"}),variables:{}}),r=e.graphqlConfig(data),t.prev=2,t.next=5,e.$axios(r);case 5:if(200!==(n=t.sent).status){t.next=15;break}if(n.data.data.products){t.next=9;break}return t.abrupt("return");case 9:return c=[],l=null===(o=n.data.data.products)||void 0===o?void 0:o.filter((function(e){return null!==e.general})),t.next=13,null==l?void 0:l.forEach((function(e){c.push(e.general.product_id)}));case 13:e.oldProductList={title:"THAM KHẢO THÊM HÀNG CŨ",items:n.data.data.products},Object.assign(e.renderOptions,{oldProduct:{title:e.oldProductList.title,show:!0,items:e.oldProductList.items}});case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),console.log(t.t0);case 20:case"end":return t.stop()}}),t,null,[[2,17]])})))()},getProductComponents:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,data,o,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=JSON.stringify(e.map((function(e){return e.toString()}))),data=JSON.stringify({query:t.queryGraphqlStringProductS({listProduct:n,typeFuntion:"ComponentPc"}),variables:{}}),o=t.graphqlConfig(data),r.prev=3,r.next=6,t.$axios(o);case 6:if(200!==(c=r.sent).status){r.next=12;break}if(c.data.data.products){r.next=10;break}return r.abrupt("return");case 10:t.componentData={title:"LINH KIỆN CẤU THÀNH",items:c.data.data.products},Object.assign(t.renderOptions,{component:{title:t.componentData.title,show:!0,items:t.componentData.items}});case 12:r.next=17;break;case 14:r.prev=14,r.t0=r.catch(3),console.log(r.t0);case 17:case"end":return r.stop()}}),r,null,[[3,14]])})))()},graphqlConfig:function(data){return{method:"post",url:"".concat("https://api.cellphones.com.vn/").concat("v2","/graphql/query"),headers:{Accept:"application/json","Content-Type":"application/json"},data:data}},queryGraphqlStringProductS:function(e){var t=e.listProduct,r=e.categoriesId,n=e.isParent,o=e.lowPriceRange,c=e.highPriceRange,l=e.stock,d=e.sku,v=e.typeFuntion,m=void 0===v?"":v,h=this.$cookies.get("cps_province")||this.province;return"query ".concat(m," {\n                  products(\n                    filter: {\n                      static: {\n                      ").concat(n?"is_parent: ".concat(JSON.stringify(n)):"","\n                      ").concat(t?"product_id : ".concat(t,","):"","\n                      ").concat(r?"categories : ".concat(r):"","\n                      province_id: ").concat(h.id,",\n                      ").concat(l?"stock: {\n                        from: 1\n                      }":"","\n                      ").concat(o||c?",filter_price: {\n                        from: ".concat(o,", to: ").concat(c,"\n                      },"):"","\n                      }\n                      ").concat(d?"dynamic: {\n                        sku: {\n                          prefix: ".concat(d,'\n                        }\n                        product_condition: {\n                          eq: "Cũ"\n                        }\n                      }'):"","\n                    }\n                    sort: [{view: desc}]\n                    size: 10\n                  ) {\n                   ").concat(this.queryString(),"\n                }")},queryString:function(){return"\n       filterable{\n                      price\n                      special_price\n                      stock\n                      thumbnail\n                      promotion_pack\n                      sticker\n                      product_id\n                      filter_price\n                      price\n                      sticker\n                      special_price\n                      stock_available_id\n                      stock\n                      filter{\n                        id\n                        value\n                      }\n                   }\n                   general {\n                      url_path\n                      doc_quyen\n                      url_key\n                      manufacturer\n                      name\n                      product_id\n                      review {\n                          total_count\n                          average_rating\n                      }\n                    }\n                  }"},getListUpsell:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,o,c,l,d,v,m,h,f,P,w,O,k,x,C,D,S,y,_,j;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==(r=e.dataCombo)&&void 0!==r&&r.length){t.next=32;break}if(n=e.productData.general.up_sell,o=e.province.id,c=[],0!==(null==n?void 0:n.length)){t.next=19;break}return m=null===(l=e.productData.general)||void 0===l||null===(l=l.categories)||void 0===l?void 0:l.map((function(e){return e.categoryId})),h=e.getListUpsellByCateIds({cateIds:m,provinceId:o}),t.next=9,h;case 9:return f=[],0===e.listProductUpSell.length&&(e.accessoriesData={title:"PHỤ KIỆN MUA CÙNG",items:[],isCrossSell:!0},Object.assign(e.renderOptions,{accessories:{title:e.accessoriesData.title,show:null===(P=e.accessoriesData)||void 0===P?void 0:P.isCrossSell,isCrossSell:null===(w=e.accessoriesData)||void 0===w?void 0:w.isCrossSell,items:e.accessoriesData.items}})),null===(d=e.listProductUpSell)||void 0===d||d.forEach((function(e){c.push(e.products.general.product_id),f.push(e.products)})),t.next=14,e.getListRatingGraphql({productIds:c});case 14:O=t.sent,e.accessoriesData={title:"PHỤ KIỆN MUA CÙNG",items:f,isCrossSell:!1,reviews:O},Object.assign(e.renderOptions,{accessories:{title:e.accessoriesData.title,show:(null==e||null===(v=e.accessoriesData.items)||void 0===v?void 0:v.length)>0,items:e.accessoriesData.items,reviews:e.accessoriesData.reviews}}),t.next=30;break;case 19:return C=e.getListUpSellByProduct({listUpsell:n,provinceId:o}),t.next=22,C;case 22:return 0===e.listProductUpSell.length&&(e.accessoriesData={title:"PHỤ KIỆN MUA CÙNG",items:[],isCrossSell:!0},Object.assign(e.renderOptions,{accessories:{title:e.accessoriesData.title,show:null===(D=e.accessoriesData)||void 0===D?void 0:D.isCrossSell,isCrossSell:null===(S=e.accessoriesData)||void 0===S?void 0:S.isCrossSell,items:e.accessoriesData.items}})),t.next=25,null===(k=e.listProductUpSell)||void 0===k?void 0:k.forEach((function(e){c.push(e.general.product_id)}));case 25:return t.next=27,e.getListRatingGraphql({productIds:c});case 27:y=t.sent,e.accessoriesData={title:"PHỤ KIỆN MUA CÙNG",items:e.listProductUpSell,isCrossSell:!1,reviews:y},Object.assign(e.renderOptions,{accessories:{title:e.accessoriesData.title,show:(null==e||null===(x=e.accessoriesData.items)||void 0===x?void 0:x.length)>0,items:e.accessoriesData.items,reviews:e.accessoriesData.reviews}});case 30:t.next=34;break;case 32:e.accessoriesData={title:"PHỤ KIỆN MUA CÙNG",items:[],isCrossSell:!0},Object.assign(e.renderOptions,{accessories:{title:e.accessoriesData.title,show:null===(_=e.accessoriesData)||void 0===_?void 0:_.isCrossSell,isCrossSell:null===(j=e.accessoriesData)||void 0===j?void 0:j.isCrossSell,items:e.accessoriesData.items}});case 34:case"end":return t.stop()}}),t)})))()},getTradeProducts:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==(r=e.productData.general)&&void 0!==r&&null!==(r=r.attributes)&&void 0!==r&&r.product_condition&&46===(null===(n=e.productData.filterable)||void 0===n?void 0:n.stock_available_id)){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.getTradeProductLinked({productId:e.productId,exchangeProductCondition:"Cũ"===(null===(o=e.productData.general)||void 0===o||null===(o=o.attributes)||void 0===o?void 0:o.product_condition)?2:1});case 4:e.exchangeProductSheetData.length>0&&(e.exchangeProductsData={title:"THU CŨ ĐỔI MỚI GIÁ TỐT",items:e.exchangeProductSheetData,isExchange:!0},Object.assign(e.renderOptions,{exchange:{title:e.exchangeProductsData.title,show:!0,items:e.exchangeProductsData.items,isExchange:e.exchangeProductsData.isExchange}}));case 5:case"end":return t.stop()}}),t)})))()}})},h=(r(1644),r(74)),component=Object(h.a)(m,(function(){var e,t=this,r=t._self._c;return r("div",{staticClass:"block-same-product",attrs:{id:"block-same-product"}},[r("div",{staticClass:"same-product-options-list is-flex is-justify-content-space-between"},[r("div",{directives:[{name:"show",rawName:"v-show",value:Object.keys(t.renderOptions||{}).length>1,expression:"Object.keys(renderOptions || {}).length>1"}],staticClass:"product-options-tabs"},[t._l(t.renderOptions,(function(e,n,o){return[e.show?r("div",{key:o,staticClass:"item button__tab",class:[n===t.activeBlock&&"active",!e.title&&"hidden"],on:{click:function(){return t.handleClickItem(n)}}},[t._v("\n          "+t._s(e.title)+"\n        ")]):t._e()]}))],2)]),t._v(" "),r("div",{staticClass:"same-product-head"},[null!==(e=t.renderOptions[t.activeBlock])&&void 0!==e&&null!==(e=e.items)&&void 0!==e&&e.length?r("h2",{staticClass:"same-product-title mt-2"},[t._v(t._s(t.renderTitle))]):t._e()]),t._v(" "),"exchange"===t.activeBlock&&t.renderOptions[t.activeBlock].isExchange?r("ExchangeProducts",{attrs:{"list-product":t.renderOptions[t.activeBlock].items}}):t._e(),t._v(" "),"accessories"===t.activeBlock&&t.renderOptions[t.activeBlock].isCrossSell?r("CrossSell",{attrs:{"price-main-product":t.productData.filterable.special_price,"product-data":t.productData}}):t._e(),t._v(" "),t._l(t.renderOptions,(function(e,n){return[e.isExchange?t._e():r("ProductList",{directives:[{name:"show",rawName:"v-show",value:t.activeBlock===n&&!e.isCrossSell,expression:"activeBlock === key && !item.isCrossSell"}],key:n,attrs:{"option-swiper":t.options,"list-product":e.items,"is-compare":"similar"===t.activeBlock,"is-show-discount-percent":!0,"is-old":"oldProduct"===t.activeBlock,"tracking-itm":""}})]}))],2)}),[],!1,null,"23527132",null);t.default=component.exports}}]);