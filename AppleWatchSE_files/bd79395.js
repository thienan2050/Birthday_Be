(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{1182:function(t,e,o){t.exports={}},1637:function(t,e,o){"use strict";o(1182)},2044:function(t,e,o){"use strict";o.r(e);o(62),o(46),o(22),o(91),o(36),o(33),o(47),o(48),o(23);var n=o(0),r=o(7),c=(o(15),o(60),o(9),o(231),o(35),o(67),o(55),o(82),o(8),o(26)),l=o(105);function m(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function d(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?m(Object(o),!0).forEach((function(e){Object(r.a)(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):m(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var v={name:"BoxPromotion",props:{promotionPack:{type:Object,default:function(){return{}}},productPromotionPack:{type:Object,default:function(){return{}}},titlePromotion:{type:String,default:"Khuyến mãi"}},data:function(){return{listPromotionData:[],listProductPromotionData:[],statusHotsale:"disappear"}},computed:d(d(d({},Object(c.e)("smember",["isSmember"])),Object(c.e)("s-student",["discountEduPack"])),Object(c.e)("product",["selectColorId","productData"])),watch:{selectColorId:function(){this.transformPromo()}},mounted:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var o,n,r,c,l,m,d,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.transformPromo(),e.prev=1,r=t.convertDateTime(null===(o=t.productData.filterable)||void 0===o||null===(o=o.short_description)||void 0===o?void 0:o.show_time),c=t.convertDateTime(null===(n=t.productData.filterable)||void 0===n||null===(n=n.short_description)||void 0===n?void 0:n.hidden_time),l=r?new Date(r).getTime()-172800:(new Date).getTime()+3600-172800,m=r?new Date(r).getTime():(new Date).getTime()+3600,d=c?new Date(c).getTime():(new Date).getTime()-3600,t.setStatusCountDown(m,d,l),e.next=10,t.listPromotion();case 10:t.listPromotionData=e.sent,e.t0=regeneratorRuntime.keys(t.productPromotionPack);case 12:if((e.t1=e.t0()).done){e.next=19;break}if(v=e.t1.value,1!==t.productPromotionPack[v].smember){e.next=17;break}return t.setCheckSmemberComponentStatus(!0),e.abrupt("break",19);case 17:e.next=12;break;case 19:e.next=24;break;case 21:e.prev=21,e.t2=e.catch(1),console.log(e.t2.message);case 24:case"end":return e.stop()}}),e,null,[[1,21]])})))()},methods:d(d({formatMoney:l.o},Object(c.d)("smember",["setCheckSmemberComponentStatus"])),{},{transformPromo:function(){var t=this;setTimeout(Object(n.a)(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.listPromotion();case 2:t.listPromotionData=e.sent,e.t0=regeneratorRuntime.keys(t.productPromotionPack);case 4:if((e.t1=e.t0()).done){e.next=11;break}if(o=e.t1.value,1!==t.productPromotionPack[o].smember){e.next=9;break}return t.setCheckSmemberComponentStatus(!0),e.abrupt("break",11);case 9:e.next=4;break;case 11:case"end":return e.stop()}}),e)}))),1e3)},listPromotion:function(){var t=this;if(0===Object.values(this.promotionPack).length)return[];var e=Object.values(this.promotionPack).map((function(e){return 0!==e.value&&"0"!==e.value&&!e.items.length>1?{name:"Tặng phiếu mua hàng ".concat(t.formatMoney(e.value)),id:e.id,product_code:e.product_code,promotionpackdetail_id:e.promotionpackdetail_id,url:e.url}:e.items}));return[].concat.apply([],e)},setStatusCountDown:function(t,e,o){if(console.log("Set Count Down Promotion"),console.log(new Date(o).toLocaleDateString("en-GB")+"==="+new Date(t).toLocaleDateString("en-GB")+"==="+new Date(e).toLocaleDateString("en-GB")),t||e){var n=(new Date).getTime(),r=e-n,c=t-n;c<0&&r<0||c>0&&r>0&&o-n>0?this.statusHotsale="disappear":r>0&&(this.statusHotsale="appear")}else this.statusHotsale="appear"},convertDateTime:function(t){return(null==t?void 0:t.replace(" ","T"))||""}})},h=(o(1637),o(74)),component=Object(h.a)(v,(function(){var t,e,o,n,r,c,l=this,m=l._self._c;return Object.keys(l.promotionPack||{}).length>0||Object.keys(l.productPromotionPack||{}).length>0||"appear"===l.statusHotsale&&null!==(t=l.productData.filterable)&&void 0!==t&&null!==(t=t.short_description)&&void 0!==t&&t.value?m("div",{staticClass:"box-product-promotion"},[m("div",{staticClass:"box-product-promotion-header is-flex p-2 has-text-weight-semibold is-align-items-center"},[m("RenderHtml",{staticClass:"icon",attrs:{html:l.$icons().Gift}}),l._v(" "),m("p",[l._v(l._s(l.titlePromotion))])],1),l._v(" "),m("div",{staticClass:"box-product-promotion-content px-2 pt-2 show-all"},[(null===(e=l.listPromotionData)||void 0===e?void 0:e.length)>0?m("div",l._l(l.listPromotionData,(function(t,e){return m("div",{key:e,staticClass:"is-flex is-align-content-center my-2"},[m("p",{staticClass:"box-product-promotion-number has-text-primary-light has-background-danger-dark"},[l._v(l._s(e+1))]),l._v(" "),m("a",l._b({staticClass:"box-product-promotion-detail mx-1 has-text-black button__promotion",attrs:{target:t.url?"_blank":""}},"a",{href:t.url?t.url:"javascript:void(0)"},!1),[l._v(l._s(t.name)+"\n          "),l._l(l.discountEduPack,(function(e,o){return m("em",{directives:[{name:"show",rawName:"v-show",value:t.uuid.includes(o),expression:"item.uuid.includes(key)"}],key:o},[l._v("(Tối\n            đa "+l._s(e.max_slot)+"\n            quà/ khách hàng)")])}))],2)])})),0):m("div"),l._v(" "),Object.keys(l.productPromotionPack).length>0?m("div",{staticClass:"mt-2"},[m("div",{staticClass:"is-flex is-align-items-center"},[m("p",{staticClass:"box-product-promotion-number has-text-primary-light has-background-danger-dark"},[l._v("\n          "+l._s((null===(o=l.listPromotionData)||void 0===o?void 0:o.length)>0?(null===(n=l.listPromotionData)||void 0===n?void 0:n.length)+1:1))]),l._v(" "),m("p",{staticClass:"box-product-promotion-detail mx-1 has-text-black"},[l._v("\n          Nhận thêm 1 trong các khuyến mãi sau:")])]),l._v(" "),m("ul",{staticClass:"product-more-promotion-content many-promo"},[l._l(l.productPromotionPack,(function(t,e){return[m("li",{directives:[{name:"show",rawName:"v-show",value:!t.smember,expression:"!item.smember"}],key:e},[t.items.length>0?l._l(t.items,(function(e,o){return m("div",{key:o,staticClass:"product-more-promotion-item"},[l._v("\n                "+l._s((null==e?void 0:e.name)||"Tặng phiếu mua hàng "+l.formatMoney(t.value))+"\n                "),m("a",l._b({directives:[{name:"show",rawName:"v-show",value:null==e?void 0:e.url,expression:"itemChild?.url"}],staticClass:"button__promotion",attrs:{target:"_blank"}},"a",{href:"".concat(null==e?void 0:e.url)},!1),[l._v("(xem\n                  chi tiết)")])])})):0!==t.value||"0"!==t.value?[m("div",{staticClass:"product-more-promotion-item"},[l._v("\n                "+l._s("Tặng phiếu mua hàng "+l.formatMoney(t.value))+"\n              ")])]:m("div")],2),l._v(" "),m("li",{directives:[{name:"show",rawName:"v-show",value:1===t.smember&&l.isSmember,expression:"item.smember===1 && isSmember"}],key:"".concat(e,"-dup")},[t.items.length>0?l._l(t.items,(function(e,o){return m("div",{key:o,staticClass:"product-more-promotion-item"},[l._v("\n                "+l._s((null==e?void 0:e.name)||"Tặng phiếu mua hàng "+l.formatMoney(t.value))+"\n                "),m("a",l._b({directives:[{name:"show",rawName:"v-show",value:null==e?void 0:e.url,expression:"itemChild?.url"}],staticClass:"button__promotion",attrs:{target:"_blank"}},"a",{href:"".concat(null==e?void 0:e.url)},!1),[l._v("(xem\n                  chi tiết)")])])})):0!==t.value||"0"!==t.value?[m("div",{staticClass:"product-more-promotion-item"},[l._v("\n                "+l._s("Tặng phiếu mua hàng "+l.formatMoney(t.value))+"\n              ")])]:m("div")],2)]}))],2)]):m("div"),l._v(" "),null!==(r=l.productData.filterable)&&void 0!==r&&null!==(r=r.short_description)&&void 0!==r&&r.value&&"appear"===l.statusHotsale?m("div",{staticClass:"hotSale"},[m("client-only",[m("RenderHtml",{attrs:{html:null===(c=l.productData.filterable)||void 0===c||null===(c=c.short_description)||void 0===c?void 0:c.value}})],1)],1):m("div")])]):m("div")}),[],!1,null,null,null);e.default=component.exports}}]);