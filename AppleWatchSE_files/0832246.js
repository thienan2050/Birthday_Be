(window.webpackJsonp=window.webpackJsonp||[]).push([[115],{1156:function(e,t,r){e.exports={}},1588:function(e,t,r){"use strict";r(1156)},2025:function(e,t,r){"use strict";r.r(t);r(15),r(46),r(36),r(47),r(48),r(22);var n=r(0),c=r(7),o=(r(8),r(33),r(116),r(9),r(23),r(82),r(26)),l=r(105);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){Object(c.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v={name:"HeaderSearch",data:function(){return{key:"",querySearch:"",overlay:!1,suggestBox:!1,html:"",listUrl:[],placeholder:"https://cdn2.cellphones.com.vn/50x50,webp/media/wysiwyg/placehoder.png",cpsMain:"https://cellphones.com.vn/",dashboard_storage:"https://cdn2.cellphones.com.vn/x/https://dashboard.cellphones.com.vn/storage/"}},computed:d(d(d(d(d(d({},Object(o.e)("search-graphql",["productResultQuickSearch","categoryResultArr","searchCateInfo"])),Object(o.e)("banner",["banner"])),Object(o.e)("login",["user"])),Object(o.e)("province",["province"])),Object(o.e)("json-server",["jsonData"])),Object(o.e)("search-history",["searchKeys"])),watch:{key:function(){var e=this;clearTimeout(this.timeOut),this.timeOut=setTimeout(Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.key.length>=1&&e.overlay)){t.next=3;break}return t.next=3,e.quickSearch({keyword:e.key});case 3:case"end":return t.stop()}}),t)}))),250)}},created:function(){this.querySearch=this.$route.query.q,this.querySearch&&(this.key=this.querySearch)},methods:d(d(d(d(d(d(d(d({},Object(o.b)("banner",["getBannerByUDGraphql"])),Object(o.b)("search-history",["getHistorySearch","insertHistorySearch","deleteHistorySearch"])),Object(o.b)("json-server",["getDataJsonServerGraphql"])),Object(o.b)("search-graphql",["submitSearchForm","quickSearch","getPathCategory","advanceSearch"])),Object(o.d)("search-graphql",["setProductResultQuickSearch","expandSearchInput"])),Object(o.d)("loader",["switchLoading"])),Object(o.d)("menu",["toggleFlagMenuMobile"])),{},{formatMoney:l.o,lockScroll:l.w,queryAdvance:function(){var e=arguments,t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=e.length>0&&void 0!==e[0]?e[0]:"","catalogsearch-result"!==t.$route.name){r.next=4;break}return r.next=4,t.advanceSearch({keyword:n||t.$route.query.q,offsetPage:1});case 4:case"end":return r.stop()}}),r)})))()},submit:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(decodeURI(e.$route.query.q)===e.key){t.next=13;break}return e.trackingKeySearch(e.key,"search_page"),t.next=4,e.insertHistorySearch(e.key);case 4:return t.next=6,e.$router.push("/catalogsearch/result?q=".concat(e.key));case 6:return t.next=8,e.queryAdvance(e.key);case 8:e.setProductResultQuickSearch([]),e.overlay=!1,e.suggestBox=!1,e.lockScroll(!1),null===(n=document.getElementById("inp$earch"))||void 0===n||n.blur();case 13:e.setProductResultQuickSearch([]),e.overlay=!1,e.suggestBox=!1,e.lockScroll(!1),null===(r=document.getElementById("inp$earch"))||void 0===r||r.blur();case 18:case"end":return t.stop()}}),t)})))()},formatPrice:function(e){return parseInt(e)?this.formatMoney(parseInt(e)):0},resetSearchResult:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setProductResultQuickSearch([]),this.overlay=!1,this.suggestBox=!1,this.lockScroll(!1),e&&this.key.length>0&&this.hover(),this.key=""},hover:function(){var e;this.banner.banner_search||this.getBannerByUDGraphql("banner_search"),this.jsonData.trending||this.getDataJsonServerGraphql({idJson:"search_trending",ud:"trending"}),0===(null===(e=this.searchKeys)||void 0===e?void 0:e.length)&&this.getHistorySearch(),this.overlay=!0,this.suggestBox=!0,this.lockScroll(!0),this.toggleFlagMenuMobile({condition:!1})},createUrlBaseOnLevel:function(e,t){var r="".concat(this.cpsMain);return e.forEach((function(e,t){r+="".concat(0!==t?"/":"").concat(e.uri)})),r+=0===e.length?"".concat(t,".html"):"/".concat(t,".html")},filterUniqueLevel:function(){var e,t,r=0;if(null!==(e=this.searchCateInfo)&&void 0!==e&&e.categories){var n=null===(t=this.searchCateInfo.categories)||void 0===t?void 0:t.filter((function(e,t,n){return e.level&&e.level!==r&&1!==e.level?(r=e.level,e):""}));return null==n?void 0:n.sort((function(a,b){return a.level-b.level}))}},redirectToCategoryLink:function(e,t){var r=this;return Object(n.a)(regeneratorRuntime.mark((function n(){var c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.switchLoading(!0),n.prev=1,n.next=4,r.getPathCategory(e);case 4:c=r.filterUniqueLevel(),window.location=r.createUrlBaseOnLevel(c,t),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(1),r.switchLoading(!1),console.log(n.t0);case 12:r.switchLoading(!1);case 13:case"end":return n.stop()}}),n,null,[[1,8]])})))()},trackingKeySearch:function(e,t){var r=this;setTimeout((function(){var n=window.dataLayer||[],c=r.$cookies.get("required_login")||!1;n.push({event:"site_search",searchQuery:e,isRequiredLogin:c,type:t,ecommerce:{region_cps:12869===r.province.company_id?"Miền Nam_7":"Miền Bắc_1",province:r.province.name},eventModel:{value:0}}),console.log("DataLayer:"),console.log(n)}),1e3)},showPrice:function(e,t){return e||t}})},m=v,y=(r(1588),r(74)),component=Object(y.a)(m,(function(){var e,t,r=this,n=r._self._c;return n("div",{staticClass:"box-search"},[n("form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),r.submit()}}},[n("div",{staticClass:"cps-group-input is-flex"},[n("div",{staticClass:"input-group-btn"},[n("button",{staticClass:"pr-0 border-0 shadow-none outline-none text-dark",attrs:{type:"submit"}},[n("RenderHtml",{attrs:{html:r.$icons().Search}})],1)]),r._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:r.key,expression:"key"}],staticClass:"cps-input",attrs:{id:"inp$earch",type:"text",placeholder:"Bạn cần tìm gì?",autocomplete:"off"},domProps:{value:r.key},on:{focus:r.hover,input:function(e){e.target.composing||(r.key=e.target.value)}}}),r._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:r.suggestBox,expression:"suggestBox"}],attrs:{id:"btn-close-search"},on:{click:function(e){return r.resetSearchResult(!0)}}},[r._v("×")]),r._v(" "),n("div",{staticClass:"box-search-result search-autocomplete",class:0===r.productResultQuickSearch.length?"is-hidden":"block",attrs:{id:"search_autocomplete"}},[n("div",{staticClass:"mb-1 category-box",class:0===r.categoryResultArr.length?"is-hidden":"block"},[n("p",{staticClass:"title-box"},[r._v("Có phải bạn muốn tìm")]),r._v(" "),n("div",{staticClass:"list-cate"},[r._l(r.categoryResultArr,(function(e){return[n("a",{key:e.category_id,staticClass:"is-block",attrs:{href:e.uri},on:{click:function(t){r.resetSearchResult(),r.insertHistorySearch(e.title_h1)}}},[n("div",{staticClass:"wrapper"},[r._v(r._s(e.title_h1)+"\n                ")])])]}))],2)]),r._v(" "),n("div",{staticClass:"mt-2 product-box"},[n("p",{staticClass:"title-box"},[r._v("Sản phẩm gợi ý")]),r._v(" "),r._l(r.productResultQuickSearch,(function(e){return n("a",{key:e.product_id,staticClass:"header-search-item is-flex is-align-items-center",attrs:{href:"/".concat(e.url_path)},on:{click:function(t){r.resetSearchResult(),r.insertHistorySearch(e.name),r.trackingKeySearch(r.key,"normal")}}},[n("nuxt-img",{staticClass:"mr-1",attrs:{provider:"CPS_IMG_PROVIDER",format:"webp",width:"auto",height:"auto",src:"https://cdn2.cellphones.com.vn/358x/media/catalog/product".concat(e.thumbnail)||!1,alt:e.name,loading:"lazy"}}),r._v(" "),n("div",{staticClass:"header-search-item-info"},[n("p",{staticClass:"header-search-name"},[r._v(r._s(e.name))]),r._v(" "),n("div",{staticClass:"is-flex is-align-items-flex-end"},[n("p",{staticClass:"header-search-special mr-1"},[r._v("\n                  "+r._s(r.formatPrice(r.showPrice(e.special_price,e.price))||"Liên hệ"))]),r._v(" "),e.special_price!==e.price?n("p",{staticClass:"header-search-price"},[r._v(r._s(r.formatPrice(e.price)||"Liên hệ"))]):r._e()])])],1)}))],2)]),r._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:r.suggestBox&&0===r.productResultQuickSearch.length,expression:"suggestBox && productResultQuickSearch.length===0"}],staticClass:"suggest-search"},[null!==(e=r.banner.banner_search)&&void 0!==e&&e.length?n("div",{staticClass:"banner-search"},[n("a",r._b({},"a",{href:r.banner.banner_search[0].url},!1),[n("nuxt-img",{attrs:{alt:r.banner.banner_search[0].name,src:"".concat(r.dashboard_storage).concat(r.banner.banner_search[0].path_desktop)}})],1)]):r._e(),r._v(" "),null!==(t=r.searchKeys)&&void 0!==t&&t.length?n("div",{staticClass:"history-search"},[n("div",{staticClass:"is-flex is-align-items-center is-justify-content-space-between"},[n("div",{staticClass:"is-flex is-align-items-center"},[n("p",{staticClass:"title-trending mr-1"},[r._v("Lịch sử tìm kiếm")]),r._v(" "),n("div",{staticClass:"icon-trending"},[n("svg",{attrs:{height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M12 7.13513V12L15.2432 15.2432",stroke:"#121219","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}}),r._v(" "),n("path",{attrs:{d:"M22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12Z",stroke:"#121219","stroke-width":"1.5"}})])])]),r._v(" "),n("a",{staticClass:"del-history is-flex is-align-items-center",on:{click:function(e){return r.deleteHistorySearch()}}},[r._v("\n              Xóa tất cả \n              "),n("div",{staticClass:"icon-del-history"},[n("svg",{attrs:{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M4.5 5L4.5 20C4.5 21.1046 5.39543 22 6.5 22H17.5C18.6046 22 19.5 21.1046 19.5 20V5",stroke:"#86888d","stroke-width":"1.5"}}),r._v(" "),n("path",{attrs:{d:"M10 11V16",stroke:"#86888d","stroke-width":"1.5","stroke-linecap":"round"}}),r._v(" "),n("path",{attrs:{d:"M14 11V16",stroke:"#86888d","stroke-width":"1.5","stroke-linecap":"round"}}),r._v(" "),n("path",{attrs:{d:"M2.5 5H21.5",stroke:"#86888d","stroke-width":"1.5","stroke-linecap":"round"}}),r._v(" "),n("path",{attrs:{d:"M7 5L7.22147 3.6712C7.3822 2.70683 8.21658 2 9.19425 2H12H14.8057C15.7834 2 16.6178 2.70683 16.7785 3.6712L17 5",stroke:"#86888d","stroke-width":"1.5","stroke-linecap":"round"}})])])])]),r._v(" "),n("div",{staticClass:"is-block search-history-box"},r._l(r.searchKeys,(function(e){return n("a",{key:"".concat(e.id),staticClass:"is-flex search-history-item",attrs:{href:"/catalogsearch/result?q=".concat(e.search_key)},on:{click:function(e){r.resetSearchResult(),r.trackingKeySearch(r.key,"history"),r.queryAdvance()}}},[n("p",[r._v(r._s(e.search_key))])])})),0)]):r._e(),r._v(" "),r.jsonData.trending?n("div",{staticClass:"trending-search"},[n("div",{staticClass:"is-flex is-align-items-center"},[n("p",{staticClass:"title-trending mr-1"},[r._v("Xu hướng tìm kiếm")]),r._v(" "),n("svg",{staticStyle:{"enable-background":"new 0 0 92.27 122.88"},attrs:{width:"15",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 92.27 122.88","xml:space":"preserve"}},[n("style",{attrs:{type:"text/css"}},[r._v("\n                .st0 {\n                  fill-rule: evenodd;\n                  clip-rule: evenodd;\n                  fill: #EC6F59;\n                }\n\n                .st1 {\n                  fill-rule: evenodd;\n                  clip-rule: evenodd;\n                  fill: #FAD15C;\n                }\n              ")]),r._v(" "),n("g",[n("path",{staticClass:"st0",attrs:{d:"M18.61,54.89C15.7,28.8,30.94,10.45,59.52,0C42.02,22.71,74.44,47.31,76.23,70.89 c4.19-7.15,6.57-16.69,7.04-29.45c21.43,33.62,3.66,88.57-43.5,80.67c-4.33-0.72-8.5-2.09-12.3-4.13C10.27,108.8,0,88.79,0,69.68 C0,57.5,5.21,46.63,11.95,37.99C12.85,46.45,14.77,52.76,18.61,54.89L18.61,54.89z"}}),r._v(" "),n("path",{staticClass:"st1",attrs:{d:"M33.87,92.58c-4.86-12.55-4.19-32.82,9.42-39.93c0.1,23.3,23.05,26.27,18.8,51.14 c3.92-4.44,5.9-11.54,6.25-17.15c6.22,14.24,1.34,25.63-7.53,31.43c-26.97,17.64-50.19-18.12-34.75-37.72 C26.53,84.73,31.89,91.49,33.87,92.58L33.87,92.58z"}})])])]),r._v(" "),n("div",{staticClass:"is-flex trending-box"},r._l(r.jsonData.trending.trendingKey,(function(e,t){return n("a",r._b({key:"".concat(e.url,"-").concat(t),staticClass:"is-flex trending-item"},"a",{href:e.url},!1),[n("nuxt-img",{attrs:{alt:"Search Trending ".concat(e.key),src:e.img,provider:"CPS_IMG_PROVIDER",format:"webp",width:"40",height:"auto",quality:"100"}}),r._v(" "),n("p",[r._v(r._s(e.key))])],1)})),0)]):r._e()])])]),r._v(" "),n("div",{staticClass:"header-overlay",class:r.productResultQuickSearch.length>0||r.overlay?"active":"",on:{click:function(e){return r.resetSearchResult()}}})])}),[],!1,null,null,null);t.default=component.exports}}]);