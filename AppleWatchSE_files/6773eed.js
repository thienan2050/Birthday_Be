(window.webpackJsonp=window.webpackJsonp||[]).push([[120],{1255:function(t,e,n){t.exports={}},1711:function(t,e,n){"use strict";n(1255)},2109:function(t,e,n){"use strict";n.r(e);n(15),n(64),n(46),n(36),n(33),n(47),n(48),n(22),n(9),n(23);var o=n(0),r=n(7),c=(n(8),n(26)),l=n(754),m=n(105),h=n(334);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var v={name:"ModalB2b",components:{VueRecaptcha:l.a},props:{productData:{type:Object,default:function(){return{}}}},data:function(){return{ggcaptcha_sitekey:"6LetVbYUAAAAABRM1I3VO6WD-xxhzTKiR9MDmbNK",formData:{name:"",phone:"",email:"",companyName:"",note:"",hasSubscription:!1,type:"product",productInfo:[{name:"",sku:"",quantity:0}]},tokenRecaptcha:"",isRegistered:!1}},computed:f(f(f({},Object(c.e)("quote",["modalShowB2B"])),Object(c.e)("block-by-id",["blockData"])),Object(c.e)("province",["province"])),watch:{"formData.name":function(t){this.formData.name=this.capitalizeFirstCharacter(t)},"formData.companyName":function(t){this.formData.companyName=this.capitalizeFirstCharacter(t)}},mounted:function(){var t,e;this.formData.productInfo[0].name=(null===(t=this.productData)||void 0===t||null===(t=t.general)||void 0===t?void 0:t.name)||"",this.formData.productInfo[0].sku=(null===(e=this.productData)||void 0===e||null===(e=e.general)||void 0===e?void 0:e.sku)||""},methods:f(f({capitalizeFirstCharacter:m.d,customRegex:m.l,pushSubscriptionEventToGA:h.e},Object(c.d)("quote",["setConditionModalB2b"])),{},{toggleModalTC:function(t){this.setConditionModalB2b(t)},handleExpired:function(){this.tokenRecaptcha=""},verifyTokenOTP:function(data){this.tokenRecaptcha=data},resetFormData:function(){this.isRegistered=!0,this.formData.companyName="",this.formData.name="",this.formData.note="",this.formData.email="",this.formData.phone="",this.tokenRecaptcha="",this.formData.productInfo=[{name:"",quantity:1}]},validate:function(){var t=!0,e=this.customRegex(this.formData.phone,"phone"),n=this.customRegex(this.formData.email,"email")&&""!==this.formData.email,o=this.customRegex(this.formData.name,"fullName");return""!==this.formData.companyName?o?e?n?(this.formData.productInfo[0].quantity<=0&&(this.$alertMessage({message:"Vui lòng kiểm tra lại số lượng sản phẩm"}),t=!1),this.tokenRecaptcha?t:(this.$alertMessage({message:"Vui lòng xác thực Google Recaptcha"}),!1)):(this.$alertMessage({message:"Vui lòng kiểm tra lại email"}),!1):(this.$alertMessage({message:"Vui lòng kiểm tra lại số điện thoại"}),!1):(this.$alertMessage({message:"Vui lòng kiểm tra lại Họ và tên"}),!1):(this.$alertMessage({message:"Vui lòng kiểm tra lại tên công ty"}),!1)},submitFormData:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,data,r,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.validate()){e.next=2;break}return e.abrupt("return");case 2:return n="".concat("https://customer.cps.onl/","b2b-api/store"),o=12869===t.province.company_id?7:1,data=JSON.stringify({contact_phone:t.formData.phone,contact_name:t.formData.name,contact_mail:t.formData.email,company_name:t.formData.companyName,opt_in:t.formData.hasSubscription?"1":"0",type:"CellphoneS",notes:t.formData.note,products:t.formData.productInfo,product_type:t.formData.type,"g-recaptcha-response":t.tokenRecaptcha,region_id:o}),e.prev=5,r={headers:{"Content-Type":"application/json"}},e.next=9,t.$axios.post(n,data,r);case 9:200===e.sent.status&&(t.$alertMessage({message:"Đăng ký thành công. Chúc quý khách mua sắm vui vẻ!",icon:"CircleCheck",type:"success"}),t.toggleModalTC(!1),t.pushSubscriptionEventToGA("B2B",t.formData.email,t.formData.phone,t.formData.name),t.resetFormData()),e.next=19;break;case 13:e.prev=13,e.t0=e.catch(5),c="",c=e.t0.response?e.t0.response.data.Message:e.t0.message,t.$alertMessage({message:c,icon:"CircleCheck",type:"error"}),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[5,13]])})))()}})},y=(n(1711),n(74)),component=Object(y.a)(v,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal",class:!t.modalShowB2B||"is-active"},[e("div",{staticClass:"modal-background",on:{click:function(e){return t.toggleModalTC(!1)}}}),t._v(" "),e("div",{staticClass:"modal-card"},[e("header",{staticClass:"modal-card-head"},[e("p",{staticClass:"modal-card-title"},[t._v("THÔNG BÁO")]),t._v(" "),e("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:function(e){return t.toggleModalTC(!1)}}})]),t._v(" "),e("section",{staticClass:"modal-card-body"},[e("div",{staticClass:"is-block has-text-centered"},[e("nuxt-img",{staticClass:"cps-sorry m-auto",attrs:{provider:"CPS_IMG_PROVIDER",format:"webp",src:"https://cdn2.cellphones.com.vn/x/media/wysiwyg/ant_sorry.gif"}})],1),t._v(" "),e("div",{staticClass:"container"},[e("RenderHtml",{staticClass:"noti-container",attrs:{html:t.blockData.b2b}}),t._v(" "),t.isRegistered?e("div",{staticClass:"block-registered"},[e("RenderHtml",{staticClass:"cps-icon",attrs:{html:t.$icons().CircleCheck}}),t._v(" "),e("br"),t._v("CellphoneS sẽ phản hồi Quý Khách trong thời gian sớm nhất qua điện thoại hoặc email."),e("br"),t._v("\n          Trân trọng cảm ơn Quý Khách!\n        ")],1):e("div",{staticClass:"block-input is-flex is-justify-content-space-between is-flex-wrap-wrap"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.companyName,expression:"formData.companyName"}],staticClass:"subscription-input",attrs:{type:"text",placeholder:"Tên công ty (bắt buộc)"},domProps:{value:t.formData.companyName},on:{input:function(e){e.target.composing||t.$set(t.formData,"companyName",e.target.value)}}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.name,expression:"formData.name"}],staticClass:"subscription-input",attrs:{type:"text",placeholder:"Tên quý khách (bắt buộc)"},domProps:{value:t.formData.name},on:{input:function(e){e.target.composing||t.$set(t.formData,"name",e.target.value)}}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.phone,expression:"formData.phone"}],staticClass:"subscription-input",attrs:{id:"inputPhone",type:"text",placeholder:"Số điện thoại (bắt buộc)",maxlength:"10"},domProps:{value:t.formData.phone},on:{input:function(e){e.target.composing||t.$set(t.formData,"phone",e.target.value)}}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.email,expression:"formData.email"}],staticClass:"subscription-input",attrs:{id:"inputEmail",type:"text",placeholder:"Địa chỉ email (bắt buộc)"},domProps:{value:t.formData.email},on:{input:function(e){e.target.composing||t.$set(t.formData,"email",e.target.value)}}}),t._v(" "),e("p",{staticClass:"subscription-input__title"},[t._v("Sản phẩm bạn quan tâm:")]),t._v(" "),e("div",{staticClass:"full is-flex is-justify-content-space-between"},[e("input",{staticClass:"subscription-input",attrs:{type:"text",placeholder:t.formData.productInfo[0].name,disabled:""}}),t._v(" "),e("div",{staticClass:"add-more-product is-flex is-justify-content-space-between is-align-items-center"},[t._v("\n              Số lượng:\n              "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.productInfo[0].quantity,expression:"formData.productInfo[0].quantity"}],staticClass:"subscription-input",attrs:{type:"number",min:"1",placeholder:"Số lượng"},domProps:{value:t.formData.productInfo[0].quantity},on:{input:function(e){e.target.composing||t.$set(t.formData.productInfo[0],"quantity",e.target.value)}}})])]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formData.note,expression:"formData.note"}],staticClass:"subscription-input full",attrs:{type:"text",rows:"3",placeholder:"Nhập ghi chú ..."},domProps:{value:t.formData.note},on:{input:function(e){e.target.composing||t.$set(t.formData,"note",e.target.value)}}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.hasSubscription,expression:"formData.hasSubscription"}],staticClass:"input-checkbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.formData.hasSubscription)?t._i(t.formData.hasSubscription,null)>-1:t.formData.hasSubscription},on:{change:function(e){var n=t.formData.hasSubscription,o=e.target,r=!!o.checked;if(Array.isArray(n)){var c=t._i(n,null);o.checked?c<0&&t.$set(t.formData,"hasSubscription",n.concat([null])):c>-1&&t.$set(t.formData,"hasSubscription",n.slice(0,c).concat(n.slice(c+1)))}else t.$set(t.formData,"hasSubscription",r)}}}),t._v(" "),e("p",{staticClass:"txt-checkbox"},[t._v("Nhận thông tin khuyến mãi")]),t._v(" "),t.modalShowB2B?e("vue-recaptcha",{ref:"recaptcha",staticClass:"full is-flex is-justify-content-center my-2",attrs:{sitekey:t.ggcaptcha_sitekey},on:{verify:t.verifyTokenOTP,expired:t.handleExpired}}):t._e()],1)],1)]),t._v(" "),e("footer",{staticClass:"modal-card-foot"},[e("button",{staticClass:"button form__button",on:{click:t.submitFormData}},[t._v("Đăng ký nhận tư vấn giá tốt nhất")])])])])}),[],!1,null,"ea24e476",null);e.default=component.exports},754:function(t,e,n){"use strict";function o(){return o=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var e in source)Object.prototype.hasOwnProperty.call(source,e)&&(t[e]=source[e])}return t},o.apply(this,arguments)}var r=Object.prototype.hasOwnProperty;var c,l,m,h=(c=!1,l=[],m={resolved:function(){return c},resolve:function(t){if(!c){c=!0;for(var i=0,e=l.length;i<e;i++)l[i](t)}},promise:{then:function(t){c?t():l.push(t)}}},{notify:function(){m.resolve()},wait:function(){return m.promise},render:function(t,e,n){this.wait().then((function(){n(window.grecaptcha.render(t,e))}))},reset:function(t){void 0!==t&&(this.assertLoaded(),this.wait().then((function(){return window.grecaptcha.reset(t)})))},execute:function(t){void 0!==t&&(this.assertLoaded(),this.wait().then((function(){return window.grecaptcha.execute(t)})))},checkRecaptchaLoad:function(){r.call(window,"grecaptcha")&&r.call(window.grecaptcha,"render")&&this.notify()},assertLoaded:function(){if(!m.resolved())throw new Error("ReCAPTCHA has not been loaded")}});"undefined"!=typeof window&&(window.vueRecaptchaApiLoaded=h.notify);var d={name:"VueRecaptcha",props:{sitekey:{type:String,required:!0},theme:{type:String},badge:{type:String},type:{type:String},size:{type:String},tabindex:{type:String},loadRecaptchaScript:{type:Boolean,default:!1},recaptchaScriptId:{type:String,default:"__RECAPTCHA_SCRIPT"},recaptchaHost:{type:String,default:"www.google.com"},language:{type:String,default:""}},beforeMount:function(){if(this.loadRecaptchaScript&&!document.getElementById(this.recaptchaScriptId)){var script=document.createElement("script");script.id=this.recaptchaScriptId,script.src="https://"+this.recaptchaHost+"/recaptcha/api.js?onload=vueRecaptchaApiLoaded&render=explicit&hl="+this.language,script.async=!0,script.defer=!0,document.head.appendChild(script)}},mounted:function(){var t=this;h.checkRecaptchaLoad();var e=o({},this.$props,{callback:this.emitVerify,"expired-callback":this.emitExpired,"error-callback":this.emitError}),n=this.$slots.default?this.$el.children[0]:this.$el;h.render(n,e,(function(e){t.$widgetId=e,t.$emit("render",e)}))},methods:{reset:function(){h.reset(this.$widgetId)},execute:function(){h.execute(this.$widgetId)},emitVerify:function(t){this.$emit("verify",t)},emitExpired:function(){this.$emit("expired")},emitError:function(){this.$emit("error")}},render:function(t){return t("div",{},this.$slots.default)}};e.a=d}}]);