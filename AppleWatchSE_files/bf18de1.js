(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{1074:function(e,t,n){e.exports={}},1484:function(e,t,n){"use strict";n(1074)},1934:function(e,t,n){"use strict";n.r(t);n(36),n(33),n(47),n(48),n(22),n(9),n(23);var r=n(0),o=n(7),c=(n(8),n(46),n(35),n(82),n(26)),l=n(105),m=n(334);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={name:"PopupEmail",data:function(){return{active:!1,email:"",phone:"",timeoutPopup:null}},computed:v(v({},Object(c.e)("province",["province"])),Object(c.e)("login",["user"])),watch:{user:{deep:!0,handler:function(){this.user.loggedIn&&clearTimeout(this.timeoutPopup)}}},mounted:function(){var e=this;this.$nextTick(Object(r.a)(regeneratorRuntime.mark((function t(){var n,title;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$cookies.get("subscriber_popup");case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0=!1;case 5:n=t.t0,e.user.loggedIn&&(n=!0),n||(title=document.getElementsByTagName("title")[0].innerHTML,e.timeoutPopup=setTimeout((function(){e.pushSimpleEventToGA(title,"view_popup_email",{regionName:12869===e.province.company_id?"Miền Nam_7":"Miền Bắc_1",provinceName:e.province.name}),e.toggleActive();e.$cookies.set("subscriber_popup",!0,{maxAge:"2592000",path:"/",domain:"cellphones.com.vn"})}),3e4));case 8:case"end":return t.stop()}}),t)}))))},methods:v(v({customRegex:l.l,pushSimpleEventToGA:m.d},Object(c.b)("loader",["switchLoading"])),{},{toggleActive:function(){this.active=!this.active},submitForm:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,o,c,l,m;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n="https://05ae8dd7.sibforms.com/serve/MUIEAMlsGYN6mum00SQjZXbjgHqYZXv-iaNNgokkZriAJl5Yu5r1hVX7zDRWUN4BtfnaeTpy6SfhQmateLbj_dtph9dcQlY-bNIb9KZ2tbg7w2mOcev_e5-kju0SMozlSVCD3slmRZ-52junyg2YZB16lQoHy7Y4sutWopngT_L7DBgNOpuUmxUHVeeeOUcwkLIhalUUh8vOBuYw?isAjax=1",r=/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/i,o=!0,""!==e.email&&!1!==r.test(e.email)){t.next=7;break}return o=!1,e.$alertMessage({message:"Bạn chưa điền đúng email",icon:"CircleExclamation",type:"error"}),t.abrupt("return",!1);case 7:if(console.log("Check email:"+o),""===e.phone||e.customRegex(e.phone,"phone")){t.next=12;break}return o=!1,e.$alertMessage({message:"Bạn chưa điền đúng số điện thoại",icon:"CircleExclamation",type:"error"}),t.abrupt("return",!1);case 12:if(console.log("Check phone:"+o),(c=new FormData).append("EMAIL",e.email),c.append("SMS__COUNTRY_CODE","+84"),c.append("SMS",e.phone),c.append("email_address_check",""),c.append("locale","en"),!0!==o){t.next=34;break}return e.switchLoading(!0),t.prev=21,t.next=24,e.$axios.post(n,c);case 24:200===(l=t.sent).status&&(e.$alertMessage({message:l.data.message,icon:"CircleCheck",type:"success"}),m={maxAge:31536e5,path:"/",domain:"cellphones.com.vn"},e.$cookies.set("subscriber_popup",!0,m),e.toggleActive(),e.pushSubEventToGA("PopupEmail",e.email,e.phone,"")),e.switchLoading(!1),t.next=34;break;case 29:t.prev=29,t.t0=t.catch(21),e.$alertMessage({message:"Xin lỗi! Số điện thoại hoặc email của quý khách đã từng đăng ký chương trình này.",icon:"CircleExclamation",type:"warning"}),e.switchLoading(!1);case 34:case"end":return t.stop()}}),t,null,[[21,29]])})))()},pushSubEventToGA:function(title,e,t,n){console.time("pushSubEventToGA"),setTimeout((function(){var r=window.dataLayer||[];r.push({user_data:{email_address:e,phone_number:t,address:{first_name:n,last_name:"",city:"",region:"",district:"",ward:"",postal_code:"",country:""},form_key:"",form_name:"PopupEmail",form_vs:"",cf:"cf_51=".concat(title)},event:"generate_lead",eventAction:"generate_lead",cdpData:{properties:{gender:"",birthYear:""}},eventModel:{value:0}}),console.log("DataLayer:"),console.log(r)}),500),console.timeEnd("pushSubEventToGA")}})},f=(n(1484),n(74)),component=Object(f.a)(d,(function(){var e=this,t=e._self._c;return e.active?t("div",{attrs:{id:"subscriberEmail"}},[t("div",{staticClass:"subscriber-popup box-banner"},[t("div",{staticClass:"subscriber-popup-body"},[t("button",{staticClass:"cancel-button-top",on:{click:function(t){return e.toggleActive()}}},[t("RenderHtml",{staticClass:"icon",attrs:{html:e.$icons().XMark}})],1),e._v(" "),t("div",{attrs:{id:"subscriber-form"}},[t("p",{staticClass:"subscribe-title"},[e._v("ĐĂNG KÝ NHẬN TIN KHUYẾN MÃI")]),e._v(" "),t("p",{staticClass:"subscribe-title text-red"},[e._v("(*) Nhận Ngay Voucher 10%")]),e._v(" "),t("p",{staticClass:"subscribe-tip"},[e._v("*Voucher sẽ được gửi sau 24h, chỉ áp dụng cho khách hàng mới")]),e._v(" "),t("div",{staticClass:"control mb-3"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"input subscriber-form-email",attrs:{id:"inputEmail",type:"text",name:"EMAIL",autocomplete:"off",placeholder:"Email *",required:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),e._v(" "),t("div",{staticClass:"control mb-3"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],staticClass:"input subscriber-form-phone",attrs:{id:"inputPhone",type:"tel",name:"SMS",autocomplete:"off",maxlength:"10",placeholder:"Số điện thoại"},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}})]),e._v(" "),e._m(0),e._v(" "),t("div",{staticClass:"group-btn"},[t("button",{staticClass:"subscriber-form-submit button button-default",on:{click:function(t){return e.submitForm()}}},[e._v("\n            ĐĂNG KÝ NGAY\n          ")]),e._v(" "),t("button",{staticClass:"subscriber-form-submit button cancel-button",on:{click:function(t){return e.toggleActive()}}},[e._v("\n            Bữa khác nha!\n          ")])])])]),e._v(" "),t("div",{staticClass:"subscriber-popup-header"},[t("div",{staticClass:"subscriber-header-image"},[t("nuxt-img",{attrs:{provider:"CPS_IMG_PROVIDER",format:"webp",src:"https://cdn2.cellphones.com.vn/x/media/wysiwyg/Voucher.gif",alt:"Pop up Email"}})],1)])]),e._v(" "),t("div",{staticClass:"header-overlay",class:e.active?"active":"",on:{click:function(t){return e.toggleActive()}}})]):e._e()}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"checkbox mb-3 disabled"},[t("label",{staticClass:"subscriber-form-label-rule"},[t("input",{staticClass:"subscriber-form-rule",attrs:{id:"OPT_IN",checked:"",disabled:"",type:"checkbox",value:"1",name:"OPT_IN"}}),e._v(" "),t("a",{attrs:{href:"https://cellphones.com.vn/tos?part=privacy-policy",target:"_blank",rel:"noopener"}},[e._v("Tôi đồng ý với\n              điều khoản của\n              CellphoneS")])])])}],!1,null,"758b05b1",null);t.default=component.exports}}]);